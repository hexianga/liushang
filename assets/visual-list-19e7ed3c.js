import{p as le,_ as Q,a1 as je,e as G,b as Dt,ag as Wt,h as he,a as bn,Z as Qn,a5 as Xn,aj as er,ak as B,ai as Hn,$ as Lt,a3 as be,al as tr}from"./calendar-c06bd7ad.js";import{_ as Ct}from"./canvas-a9b0b7c8.js";import{N as jt}from"./faker-75f62213.js";const nr=()=>{const[e,t]=le(""),n=Q(null),r=je(o=>{const{value:i,autoFocus:l=!0,className:u,onEnter:s,onEsc:f,onKeyDown:c,...h}=o;return G("input",{type:"text",value:i,ref:n,placeholder:"请输入内容",autoFocus:l,className:Dt("border p-1 focus-visible:outline-none",u),onInput:m=>{t(m.target.value)},onKeyDown:m=>{Ct("enter")(m)?s==null||s(m):Ct("esc")(m)&&(f==null||f(m)),c==null||c(m)},...h})},[]);return{value:e,setValue:t,inputRef:n,Input:r}},Mo=()=>{const[e,t]=le(""),n=Q(null),r=je(o=>{const{value:i,autoFocus:l=!0,className:u,onEnter:s,onEsc:f,onKeyDown:c,...h}=o;return G("textarea",{type:"text",value:i,placeholder:"请输入内容",ref:n,autoFocus:l,className:Dt("resize-none border p-1 focus-visible:outline-none",u),onInput:m=>{t(m.target.value)},onKeyDown:m=>{Ct("enter")(m)?s==null||s(m):Ct("esc")(m)&&(f==null||f(m)),c==null||c(m)},...h})},[]);return{value:e,setValue:t,inputRef:n,TextArea:r}},rr=e=>new Array(e).fill(1).map((t,n)=>({id:Wt(),index:n+1,content:jt.lorem.sentences()})),Rn=e=>{const t={},n=[],r=[];return new Array(e).fill(1).map((o,i)=>{const l=Wt(),u={id:l,index:i+1,content:jt.lorem.sentences()};r.push(u),n.push(l),t[l]=u}),{idList:n,dataList:r,dataMap:t}},Te=40,St=5,{idList:or,dataList:ir,dataMap:lr}=Rn(1e3),ar=()=>{const[e,t]=le(ir),n=Q(null),r=Q(null),o=Q([]),[i,l]=le([0,Math.min(Math.ceil(window.innerHeight/Te),e.length)]);he(()=>{e.forEach((c,h)=>{const m={id:c.id,bottom:(h+1)*Te,height:Te,diffHeight:0};o.current.push(m)})},[]),he(()=>{const c=r.current;c&&(c.style.height=`${e.length*Te}px`)},[]),he(()=>{const c=n.current,h=r.current;if(!c||!h)return;const m=I=>{const v=o.current;let S=0,g=v.length-1,d=0;for(;S<=g;){d=Math.floor((S+g)/2);const a=v[d];if(a.bottom===I)break;a.bottom<I&&(S=d+1),a.bottom>I&&(g=d-1)}return o.current[d].bottom<I&&d++,d},x=()=>{const I=c.getBoundingClientRect(),v=h.getBoundingClientRect(),S=I.top-v.top,g=Math.ceil(c.clientHeight/Te),d=m(S),C=Math.max(d-St,0);l(a=>a[0]===C?a:[C,C+g+St])};return c.addEventListener("scroll",x),()=>{c.removeEventListener("scroll",x)}},[]),he(()=>{const c=r.current;if(!c)return;const h=c.childNodes;h.forEach(g=>{const d=Number(g.dataset.index),C=o.current[d].height,a=g.offsetHeight,p=C-a;p!==0&&(o.current[d].height=a,o.current[d].diffHeight=p)});let m=0;const x=h[0],I=Number(x.dataset.index),v=o.current.length;for(let g=I;g<v;g++){const d=o.current[g];d.diffHeight!==0&&(m+=d.diffHeight,d.diffHeight=0),d.bottom=d.bottom-m}const S=o.current[v-1].bottom;c.style.height=`${S}px`},[i]);const u=(c,h)=>G(bn,{children:e.slice(c,h).map((m,x)=>G("div",{className:"border-b p-2","data-index":c+x,"data-uuid":m.id,children:[G("span",{className:"font-bold text-[blue]",children:m.index})," ",m.content]},c+x))}),s=i[0],f=i[1];return G("div",{ref:n,className:"h-[800px] w-[400px] overflow-auto border",children:G("div",{ref:r,className:"relative w-full",style:{paddingTop:`${s>=1?o.current[s-1].bottom:0}px`},children:u(s,f)})})},ur=()=>{const[e]=le(or),t=Q(null),n=Q(null),r=Q(null),o=Q({}),[i,l]=le([0,Math.min(Math.ceil(window.innerHeight/Te),e.length)]),u=Q(e);u.current=e,he(()=>{const I=n.current;I&&(I.style.height=`${e.length*Te}px`)},[]),he(()=>{e.forEach((I,v)=>{o.current[I]={id:I,bottom:(v+1)*Te,height:Te,diffHeight:0}})},[]),he(()=>{const I=r.current,v=n.current;if(!I||!v)return;I.childNodes.forEach(y=>{const z=y.dataset.uuid;if(!z)return;const H=o.current[z].height,P=y.offsetHeight,j=H-P;j!==0&&(o.current[z].height=P,o.current[z].diffHeight=j)});let g=0;const d=i[0],C=u.current.length;for(let y=d;y<C;y++){const z=u.current[y],H=o.current[z];H.diffHeight!==0&&(g+=H.diffHeight,H.diffHeight=0),H.bottom=H.bottom-g}const a=u.current[C-1],w=o.current[a].bottom;v.style.height=`${w}px`},[i]);const s=I=>{const v=o.current;let S=0,g=u.current.length-1,d=0,C="";for(;S<=g;){d=Math.floor((S+g)/2),C=u.current[d];const p=v[C];if(p.bottom===I)break;p.bottom<I&&(S=d+1),p.bottom>I&&(g=d-1)}return C=u.current[d],v[C].bottom<I&&d++,d};he(()=>{const I=t.current,v=r.current,S=n.current;if(!I||!v||!S)return;const g=()=>{const d=I.getBoundingClientRect(),C=S.getBoundingClientRect(),a=d.top-C.top,p=Math.ceil(I.clientHeight/Te),w=s(a),y=Math.max(w-St,0);i[0]!==y&&l([y,y+p+St])};return I.addEventListener("scroll",g),()=>{I.removeEventListener("scroll",g)}},[i]);const f=(I,v)=>G(bn,{children:e.slice(I,v).map(S=>{const g=lr[S];return G("div",{className:"border-b p-2","data-uuid":S,children:[G("span",{className:"font-bold text-[blue]",children:g.index})," ",g.content]},S)})}),c=i[0],h=i[1],m=e[c],x=`translate3d(0,${c>=1?o.current[m].bottom:0}px,0)`;return G("div",{ref:t,className:"h-[800px] w-[400px] overflow-auto border",children:G("div",{ref:n,className:"relative w-full",children:G("div",{ref:r,className:"absolute top-0 w-full",style:{transform:x},children:f(c,h)})})})},cr=(e,t)=>{let n;Promise.resolve().then(()=>n=Date.now());const r=()=>{Date.now()-n>=t?e():o.id=requestAnimationFrame(r)},o={id:requestAnimationFrame(r)};return o},sr=()=>{const[e,t]=le(!1),n=Q(!1),r=Q(),o=je(i=>{var l;n.current?((l=r.current)!=null&&l.id&&cancelAnimationFrame(r.current.id),r.current=cr(()=>{r.current=void 0,t(!1),n.current=!1,i==null||i()},200)):(t(!0),n.current=!0)},[]);return{isScrolling:e,checkScrollEnded:o,isScrollingRef:n}},Je=40,an=20,dr=()=>{const[e]=le(rr(1e4)),t=Q(null),n=Q(null),r=Q(0),[o,i]=le([0,Math.min(Math.ceil(window.innerHeight/Je),e.length)]),l=Q(0);l.current=o[0];const{checkScrollEnded:u}=sr();he(()=>{const c=t.current,h=n.current;if(!c||!h)return;const m=()=>{const x=c.getBoundingClientRect(),I=h.getBoundingClientRect(),v=Math.ceil(c.clientHeight/Je),S=x.top-I.top;u(()=>console.log("scroll end"));let g="bottom";S<r.current&&(g="top"),r.current=S;const d=Math.floor(S/Je);let C=0,a=0;g==="bottom"?(C=d,a=d+v+an):(C=Math.max(d-an,0),a=d+v),l.current!==C&&i([C,a])};return c.addEventListener("scroll",m),()=>{c.removeEventListener("scroll",m)}},[u]);const s=o[0],f=o[1];return G("div",{className:"relative box-border h-[800px] w-96 overflow-y-scroll border",ref:t,children:G("div",{style:{height:`${e.length*Je}px`},ref:n,children:e.slice(s,f).map((c,h)=>G("div",{className:"absolute w-full border-b-[1px]",style:{top:`${(s+h)*Je}px`,height:Je},children:G("div",{className:"flex h-full items-center px-4",children:c.index})},c.id))})})};var bt=0,De=1,tt=2,En=4;function Ht(e,t){return function(n){return e(t(n))}}function fr(e,t){return t(e)}function zn(e,t){return function(n){return e(t,n)}}function un(e,t){return function(){return e(t)}}function xt(e){return function(t){return t[e]}}function Rt(e,t){return t(e),e}function Z(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t}function hr(e){e()}function cn(e){return function(){return e}}function mr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(){t.map(hr)}}function $e(){}function U(e,t){return e(De,t)}function _(e,t){e(bt,t)}function Gt(e){e(tt)}function ke(e){return e(En)}function E(e,t){return U(e,zn(t,bt))}function Ge(e,t){var n=e(De,function(r){n(),t(r)});return n}function k(){var e=[];return function(t,n){switch(t){case tt:e.splice(0,e.length);return;case De:return e.push(n),function(){var r=e.indexOf(n);r>-1&&e.splice(r,1)};case bt:e.slice().forEach(function(r){r(n)});return;default:throw new Error("unrecognized action "+t)}}}function b(e){var t=e,n=k();return function(r,o){switch(r){case De:var i=o;i(t);break;case bt:t=o;break;case En:return t}return n(r,o)}}function gr(e){var t,n,r=function(){return t&&t()};return function(o,i){switch(o){case De:return i?n===i?void 0:(r(),n=i,t=U(e,i),t):(r(),$e);case tt:r(),n=null;return;default:throw new Error("unrecognized action "+o)}}}function pe(e){return Rt(k(),function(t){return E(e,t)})}function fe(e,t){return Rt(b(t),function(n){return E(e,n)})}function pr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return t.reduceRight(fr,r)}}function T(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=pr.apply(void 0,n);return function(i,l){switch(i){case De:return U(e,o(l));case tt:Gt(e);return;default:throw new Error("unrecognized action "+i)}}}function Bn(e,t){return e===t}function Y(e){e===void 0&&(e=Bn);var t;return function(n){return function(r){e(t,r)||(t=r,n(r))}}}function A(e){return function(t){return function(n){e(n)&&t(n)}}}function R(e){return function(t){return Ht(t,e)}}function Ee(e){return function(t){return function(){return t(e)}}}function ze(e,t){return function(n){return function(r){return n(t=e(t,r))}}}function wt(e){return function(t){return function(n){e>0?e--:t(n)}}}function Xe(e){var t,n;return function(r){return function(o){t=o,!n&&(n=setTimeout(function(){n=void 0,r(t)},e))}}}function sn(e){var t,n;return function(r){return function(o){t=o,n&&clearTimeout(n),n=setTimeout(function(){r(t)},e)}}}function V(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=new Array(t.length),o=0,i=null,l=Math.pow(2,t.length)-1;return t.forEach(function(u,s){var f=Math.pow(2,s);U(u,function(c){var h=o;o=o|f,r[s]=c,h!==l&&o===l&&i&&(i(),i=null)})}),function(u){return function(s){var f=function(){return u([s].concat(r))};o===l?f():i=f}}}function dn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r,o){switch(r){case De:return mr.apply(void 0,t.map(function(i){return U(i,o)}));case tt:return;default:throw new Error("unrecognized action "+r)}}}function F(e,t){return t===void 0&&(t=Bn),T(e,Y(t))}function ae(){for(var e=k(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=new Array(n.length),i=0,l=Math.pow(2,n.length)-1;return n.forEach(function(u,s){var f=Math.pow(2,s);U(u,function(c){o[s]=c,i=i|f,i===l&&_(e,o)})}),function(u,s){switch(u){case De:return i===l&&s(o),U(e,s);case tt:return Gt(e);default:throw new Error("unrecognized action "+u)}}}function W(e,t,n){t===void 0&&(t=[]);var r=n===void 0?{singleton:!0}:n,o=r.singleton;return{id:vr(),constructor:e,dependencies:t,singleton:o}}var vr=function(){return Symbol()};function Ir(e){var t=new Map,n=function r(o){var i=o.id,l=o.constructor,u=o.dependencies,s=o.singleton;if(s&&t.has(i))return t.get(i);var f=l(u.map(function(c){return r(c)}));return s&&t.set(i,f),f};return n(e)}function Cr(e,t){if(e==null)return{};var n={},r=Object.keys(e),o,i;for(i=0;i<r.length;i++)o=r[i],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}function Sr(e,t){if(e){if(typeof e=="string")return fn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fn(e,t)}}function fn(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function kt(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=Sr(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var xr=["children"];function wr(e,t){for(var n={},r={},o=0,i=e.length;o<i;)r[e[o]]=1,o+=1;for(var l in t)r.hasOwnProperty(l)||(n[l]=t[l]);return n}var pt=typeof document<"u"?Hn:he;function Ut(e,t,n){var r=Object.keys(t.required||{}),o=Object.keys(t.optional||{}),i=Object.keys(t.methods||{}),l=Object.keys(t.events||{}),u=Qn({});function s(v,S){v.propsReady&&_(v.propsReady,!1);for(var g=kt(r),d;!(d=g()).done;){var C=d.value,a=v[t.required[C]];_(a,S[C])}for(var p=kt(o),w;!(w=p()).done;){var y=w.value;if(y in S){var z=v[t.optional[y]];_(z,S[y])}}v.propsReady&&_(v.propsReady,!0)}function f(v){return i.reduce(function(S,g){return S[g]=function(d){var C=v[t.methods[g]];_(C,d)},S},{})}function c(v){return l.reduce(function(S,g){return S[g]=gr(v[t.events[g]]),S},{})}var h=Xn(function(v,S){var g=v.children,d=Cr(v,xr),C=le(function(){return Rt(Ir(e),function(y){return s(y,d)})}),a=C[0],p=le(un(c,a)),w=p[0];return pt(function(){for(var y=kt(l),z;!(z=y()).done;){var H=z.value;H in d&&U(w[H],d[H])}return function(){Object.values(w).map(Gt)}},[d,w,a]),pt(function(){s(a,d)}),er(S,cn(f(a))),B(u.Provider,{value:a},n?B(n,wr([].concat(r,o,l),d),g):g)}),m=function(S){return je(zn(_,Lt(u)[S]),[S])},x=function(S){var g=Lt(u),d=g[S],C=le(un(ke,d)),a=C[0],p=C[1];return pt(function(){return U(d,function(w){w!==a&&p(cn(w))})},[d,a]),a},I=function(S,g){var d=Lt(u),C=d[S];pt(function(){return U(C,g)},[g,C])};return{Component:h,usePublisher:m,useEmitterValue:x,useEmitter:I}}function O(){return O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},O.apply(this,arguments)}function nt(e,t){if(e==null)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t.indexOf(n=i[r])>=0||(o[n]=e[n]);return o}function hn(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ue(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(o,i){if(o){if(typeof o=="string")return hn(o,i);var l=Object.prototype.toString.call(o).slice(8,-1);return l==="Object"&&o.constructor&&(l=o.constructor.name),l==="Map"||l==="Set"?Array.from(o):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?hn(o,i):void 0}}(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var lt,ne,Tr=typeof document<"u"?Hn:he;(function(e){e[e.DEBUG=0]="DEBUG",e[e.INFO=1]="INFO",e[e.WARN=2]="WARN",e[e.ERROR=3]="ERROR"})(ne||(ne={}));var yr=((lt={})[ne.DEBUG]="debug",lt[ne.INFO]="log",lt[ne.WARN]="warn",lt[ne.ERROR]="error",lt),Ke=W(function(){var e=b(ne.ERROR);return{log:b(function(t,n,r){var o;r===void 0&&(r=ne.INFO),r>=((o=(typeof globalThis>"u"?window:globalThis).VIRTUOSO_LOG_LEVEL)!=null?o:ke(e))&&console[yr[r]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: initial",t,n)}),logLevel:e}},[],{singleton:!0});function $t(e,t){t===void 0&&(t=!0);var n=Q(null),r=function(i){};if(typeof ResizeObserver<"u"){var o=new ResizeObserver(function(i){var l=i[0].target;l.offsetParent!==null&&e(l)});r=function(i){i&&t?(o.observe(i),n.current=i):(n.current&&o.unobserve(n.current),n.current=null)}}return{ref:n,callbackRef:r}}function _e(e,t){return t===void 0&&(t=!0),$t(e,t).callbackRef}function Ln(e,t,n,r,o,i){return $t(function(l){for(var u=function(c,h,m,x){var I=c.length;if(I===0)return null;for(var v=[],S=0;S<I;S++){var g=c.item(S);if(g&&g.dataset.index!==void 0){var d=parseInt(g.dataset.index),C=parseFloat(g.dataset.knownSize),a=h(g,"offsetHeight");if(a===0&&x("Zero-sized element, this should not happen",{child:g},ne.ERROR),a!==C){var p=v[v.length-1];v.length===0||p.size!==a||p.endIndex!==d-1?v.push({startIndex:d,endIndex:d,size:a}):v[v.length-1].endIndex++}}}return v}(l.children,t,0,o),s=l.parentElement;!s.dataset.virtuosoScroller;)s=s.parentElement;var f=i?i.scrollTop:s.firstElementChild.dataset.viewportType==="window"?window.pageYOffset||document.documentElement.scrollTop:s.scrollTop;r({scrollTop:Math.max(f,0),scrollHeight:(i??s).scrollHeight,viewportHeight:(i??s).offsetHeight}),u!==null&&e(u)},n)}function Be(e,t){return Math.round(e.getBoundingClientRect()[t])}function kn(e,t,n,r,o){r===void 0&&(r=$e);var i=Q(null),l=Q(null),u=Q(null),s=Q(!1),f=je(function(c){var h=c.target,m=h===window||h===document?window.pageYOffset||document.documentElement.scrollTop:h.scrollTop,x=h===window?document.documentElement.scrollHeight:h.scrollHeight,I=h===window?window.innerHeight:h.offsetHeight,v=function(){e({scrollTop:Math.max(m,0),scrollHeight:x,viewportHeight:I})};s.current?tr(v):v(),s.current=!1,l.current!==null&&(m===l.current||m<=0||m===h.scrollHeight-Be(h,"height"))&&(l.current=null,t(!0),u.current&&(clearTimeout(u.current),u.current=null))},[e,t]);return he(function(){var c=o||i.current;return r(o||i.current),f({target:c}),c.addEventListener("scroll",f,{passive:!0}),function(){r(null),c.removeEventListener("scroll",f)}},[i,f,n,r,o]),{scrollerRef:i,scrollByCallback:function(c){s.current=!0,i.current.scrollBy(c)},scrollToCallback:function(c){var h=i.current;if(h&&(!("offsetHeight"in h)||h.offsetHeight!==0)){var m,x,I,v=c.behavior==="smooth";if(h===window?(x=Math.max(Be(document.documentElement,"height"),document.documentElement.scrollHeight),m=window.innerHeight,I=document.documentElement.scrollTop):(x=h.scrollHeight,m=Be(h,"height"),I=h.scrollTop),c.top=Math.ceil(Math.max(Math.min(x-m,c.top),0)),Math.abs(m-x)<1.01||c.top===I)return e({scrollTop:I,scrollHeight:x,viewportHeight:m}),void(v&&t(!0));v?(l.current=c.top,u.current&&clearTimeout(u.current),u.current=setTimeout(function(){u.current=null,l.current=null,t(!0)},1e3)):l.current=null,h.scrollTo(c)}}}}var Kt=W(function(){return{recalcInProgress:b(!1)}},[],{singleton:!0}),me=W(function(e){var t=e[0].recalcInProgress,n=k(),r=k(),o=b(0),i=k(),l=b(0),u=k(),s=k(),f=b(0),c=b(0),h=b(0),m=k(),x=k(),I=b(!1),v=b(!1);return E(T(r,Ee(!1)),t),E(T(n,R(function(S){return S.scrollTop})),r),E(T(n,R(function(S){return S.scrollHeight})),s),E(r,l),{scrollContainerState:n,scrollTop:r,viewportHeight:u,headerHeight:f,fixedHeaderHeight:c,footerHeight:h,scrollHeight:s,smoothScrollTargetReached:i,react18ConcurrentRendering:v,scrollTo:m,scrollBy:x,statefulScrollTop:l,deviation:o,scrollingInProgress:I}},Z(Kt),{singleton:!0}),ut={lvl:0};function Pn(e,t,n,r,o){return r===void 0&&(r=ut),o===void 0&&(o=ut),{k:e,v:t,lvl:n,l:r,r:o}}function q(e){return e===ut}function at(){return ut}function Mt(e,t){if(q(e))return ut;var n=e.k,r=e.l,o=e.r;if(t===n){if(q(r))return o;if(q(o))return r;var i=On(r);return Vt(ie(e,{k:i[0],v:i[1],l:Mn(r)}))}return Vt(ie(e,t<n?{l:Mt(r,t)}:{r:Mt(o,t)}))}function ye(e,t,n){if(n===void 0&&(n="k"),q(e))return[-1/0,void 0];if(e[n]===t)return[e.k,e.v];if(e[n]<t){var r=ye(e.r,t,n);return r[0]===-1/0?[e.k,e.v]:r}return ye(e.l,t,n)}function we(e,t,n){return q(e)?Pn(t,n,1):t===e.k?ie(e,{k:t,v:n}):function(r){return Nt(Vn(r))}(ie(e,t<e.k?{l:we(e.l,t,n)}:{r:we(e.r,t,n)}))}function At(e,t,n){if(q(e))return[];var r=e.k,o=e.v,i=e.r,l=[];return r>t&&(l=l.concat(At(e.l,t,n))),r>=t&&r<=n&&l.push({k:r,v:o}),r<=n&&(l=l.concat(At(i,t,n))),l}function Tt(e){return q(e)?[]:[].concat(Tt(e.l),[{k:e.k,v:e.v}],Tt(e.r))}function On(e){return q(e.r)?[e.k,e.v]:On(e.r)}function Mn(e){return q(e.r)?e.l:Vt(ie(e,{r:Mn(e.r)}))}function ie(e,t){return Pn(t.k!==void 0?t.k:e.k,t.v!==void 0?t.v:e.v,t.lvl!==void 0?t.lvl:e.lvl,t.l!==void 0?t.l:e.l,t.r!==void 0?t.r:e.r)}function Pt(e){return q(e)||e.lvl>e.r.lvl}function Vt(e){var t=e.l,n=e.r,r=e.lvl;if(n.lvl>=r-1&&t.lvl>=r-1)return e;if(r>n.lvl+1){if(Pt(t))return Vn(ie(e,{lvl:r-1}));if(q(t)||q(t.r))throw new Error("Unexpected empty nodes");return ie(t.r,{l:ie(t,{r:t.r.l}),r:ie(e,{l:t.r.r,lvl:r-1}),lvl:r})}if(Pt(e))return Nt(ie(e,{lvl:r-1}));if(q(n)||q(n.l))throw new Error("Unexpected empty nodes");var o=n.l,i=Pt(o)?n.lvl-1:n.lvl;return ie(o,{l:ie(e,{r:o.l,lvl:r-1}),r:Nt(ie(n,{l:o.r,lvl:i})),lvl:o.lvl+1})}function Et(e,t,n){return q(e)?[]:An(At(e,ye(e,t)[0],n),function(r){return{index:r.k,value:r.v}})}function An(e,t){var n=e.length;if(n===0)return[];for(var r=t(e[0]),o=r.index,i=r.value,l=[],u=1;u<n;u++){var s=t(e[u]),f=s.index,c=s.value;l.push({start:o,end:f-1,value:i}),o=f,i=c}return l.push({start:o,end:1/0,value:i}),l}function Nt(e){var t=e.r,n=e.lvl;return q(t)||q(t.r)||t.lvl!==n||t.r.lvl!==n?e:ie(t,{l:ie(e,{r:t.l}),lvl:n+1})}function Vn(e){var t=e.l;return q(t)||t.lvl!==e.lvl?e:ie(t,{r:ie(e,{l:t.r})})}function yt(e,t,n,r){r===void 0&&(r=0);for(var o=e.length-1;r<=o;){var i=Math.floor((r+o)/2),l=n(e[i],t);if(l===0)return i;if(l===-1){if(o-r<2)return i-1;o=i-1}else{if(o===r)return i;r=i+1}}throw new Error("Failed binary finding record in array - "+e.join(",")+", searched for "+t)}function Nn(e,t,n){return e[yt(e,t,n)]}function br(e){var t=e.size,n=e.startIndex,r=e.endIndex;return function(o){return o.start===n&&(o.end===r||o.end===1/0)&&o.value===t}}function _t(e,t){var n=e.index;return t===n?0:t<n?-1:1}function Hr(e,t){var n=e.offset;return t===n?0:t<n?-1:1}function Rr(e){return{index:e.index,value:e}}function Fn(e,t,n){var r=e,o=0,i=0,l=0,u=0;if(t!==0){l=r[u=yt(r,t-1,_t)].offset;var s=ye(n,t-1);o=s[0],i=s[1],r.length&&r[u].size===ye(n,t)[1]&&(u-=1),r=r.slice(0,u+1)}else r=[];for(var f,c=Ue(Et(n,t,1/0));!(f=c()).done;){var h=f.value,m=h.start,x=h.value,I=(m-o)*i+l;r.push({offset:I,size:x,index:m}),o=m,l=I,i=x}return{offsetTree:r,lastIndex:o,lastOffset:l,lastSize:i}}function Er(e,t){var n=t[0],r=t[1];n.length>0&&(0,t[2])("received item sizes",n,ne.DEBUG);var o=e.sizeTree,i=o,l=0;if(r.length>0&&q(o)&&n.length===2){var u=n[0].size,s=n[1].size;i=r.reduce(function(m,x){return we(we(m,x,u),x+1,s)},i)}else{var f=function(m,x){for(var I,v=q(m)?0:1/0,S=Ue(x);!(I=S()).done;){var g=I.value,d=g.size,C=g.startIndex,a=g.endIndex;if(v=Math.min(v,C),q(m))m=we(m,0,d);else{var p=Et(m,C-1,a+1);if(!p.some(br(g))){for(var w,y=!1,z=!1,H=Ue(p);!(w=H()).done;){var P=w.value,j=P.start,J=P.end,X=P.value;y?(a>=j||d===X)&&(m=Mt(m,j)):(z=X!==d,y=!0),J>a&&a>=j&&X!==d&&(m=we(m,a+1,X))}z&&(m=we(m,C,d))}}}return[m,v]}(i,n);i=f[0],l=f[1]}if(i===o)return e;var c=Fn(e.offsetTree,l,i),h=c.offsetTree;return{sizeTree:i,offsetTree:h,lastIndex:c.lastIndex,lastOffset:c.lastOffset,lastSize:c.lastSize,groupOffsetTree:r.reduce(function(m,x){return we(m,x,ct(x,h))},at()),groupIndices:r}}function ct(e,t){if(t.length===0)return 0;var n=Nn(t,e,_t);return n.size*(e-n.index)+n.offset}function Dn(e,t,n){if(function(o){return o.groupIndex!==void 0}(e))return t.groupIndices[e.groupIndex]+1;var r=Wn(e.index==="LAST"?n:e.index,t);return Math.max(0,r,Math.min(n,r))}function Wn(e,t){if(!zt(t))return e;for(var n=0;t.groupIndices[n]<=e+n;)n++;return e+n}function zt(e){return!q(e.groupOffsetTree)}var zr={offsetHeight:"height",offsetWidth:"width"},Pe=W(function(e){var t=e[0].log,n=e[1].recalcInProgress,r=k(),o=k(),i=fe(o,0),l=k(),u=k(),s=b(0),f=b([]),c=b(void 0),h=b(void 0),m=b(function(a,p){return Be(a,zr[p])}),x=b(void 0),I={offsetTree:[],sizeTree:at(),groupOffsetTree:at(),lastIndex:0,lastOffset:0,lastSize:0,groupIndices:[]},v=fe(T(r,V(f,t),ze(Er,I),Y()),I);E(T(f,A(function(a){return a.length>0}),V(v),R(function(a){var p=a[0],w=a[1],y=p.reduce(function(z,H,P){return we(z,H,ct(H,w.offsetTree)||P)},at());return O({},w,{groupIndices:p,groupOffsetTree:y})})),v),E(T(o,V(v),A(function(a){return a[0]<a[1].lastIndex}),R(function(a){var p=a[1];return[{startIndex:a[0],endIndex:p.lastIndex,size:p.lastSize}]})),r),E(c,h);var S=fe(T(c,R(function(a){return a===void 0})),!0);E(T(h,A(function(a){return a!==void 0&&q(ke(v).sizeTree)}),R(function(a){return[{startIndex:0,endIndex:0,size:a}]})),r);var g=pe(T(r,V(v),ze(function(a,p){var w=p[1];return{changed:w!==a.sizes,sizes:w}},{changed:!1,sizes:I}),R(function(a){return a.changed})));U(T(s,ze(function(a,p){return{diff:a.prev-p,prev:p}},{diff:0,prev:0}),R(function(a){return a.diff})),function(a){a>0?(_(n,!0),_(l,a)):a<0&&_(u,a)}),U(T(s,V(t)),function(a){a[0]<0&&(0,a[1])("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",{firstItemIndex:s},ne.ERROR)});var d=pe(l);E(T(l,V(v),R(function(a){var p=a[0],w=a[1];if(w.groupIndices.length>0)throw new Error("Virtuoso: prepending items does not work with groups");return Tt(w.sizeTree).reduce(function(y,z){var H=z.k,P=z.v;return{ranges:[].concat(y.ranges,[{startIndex:y.prevIndex,endIndex:H+p-1,size:y.prevSize}]),prevIndex:H+p,prevSize:P}},{ranges:[],prevIndex:0,prevSize:w.lastSize}).ranges})),r);var C=pe(T(u,V(v),R(function(a){return ct(-a[0],a[1].offsetTree)})));return E(T(u,V(v),R(function(a){var p=a[0],w=a[1];if(w.groupIndices.length>0)throw new Error("Virtuoso: shifting items does not work with groups");var y=Tt(w.sizeTree).reduce(function(z,H){var P=H.v;return we(z,Math.max(0,H.k+p),P)},at());return O({},w,{sizeTree:y},Fn(w.offsetTree,0,y))})),v),{data:x,totalCount:o,sizeRanges:r,groupIndices:f,defaultItemSize:h,fixedItemSize:c,unshiftWith:l,shiftWith:u,shiftWithOffset:C,beforeUnshiftWith:d,firstItemIndex:s,sizes:v,listRefresh:g,statefulTotalCount:i,trackItemSizes:S,itemSize:m}},Z(Ke,Kt),{singleton:!0}),Br=typeof document<"u"&&"scrollBehavior"in document.documentElement.style;function jn(e){var t=typeof e=="number"?{index:e}:e;return t.align||(t.align="start"),t.behavior&&Br||(t.behavior="auto"),t.offset||(t.offset=0),t}var ft=W(function(e){var t=e[0],n=t.sizes,r=t.totalCount,o=t.listRefresh,i=e[1],l=i.scrollingInProgress,u=i.viewportHeight,s=i.scrollTo,f=i.smoothScrollTargetReached,c=i.headerHeight,h=i.footerHeight,m=e[2].log,x=k(),I=b(0),v=null,S=null,g=null;function d(){v&&(v(),v=null),g&&(g(),g=null),S&&(clearTimeout(S),S=null),_(l,!1)}return E(T(x,V(n,u,r,I,c,h,m),R(function(C){var a=C[0],p=C[1],w=C[2],y=C[3],z=C[4],H=C[5],P=C[6],j=C[7],J=jn(a),X=J.align,ge=J.behavior,K=J.offset,M=y-1,ee=Dn(J,p,M),re=ct(ee,p.offsetTree)+H;X==="end"?(re=re-w+ye(p.sizeTree,ee)[1],ee===M&&(re+=P)):X==="center"?re=re-w/2+ye(p.sizeTree,ee)[1]/2:re-=z,K&&(re+=K);var L=function(oe){d(),oe?(j("retrying to scroll to",{location:a},ne.DEBUG),_(x,a)):j("list did not change, scroll successful",{},ne.DEBUG)};if(d(),ge==="smooth"){var D=!1;g=U(o,function(oe){D=D||oe}),v=Ge(f,function(){L(D)})}else v=Ge(T(o,function(oe){var xe=setTimeout(function(){oe(!1)},50);return function(Ce){Ce&&(oe(!0),clearTimeout(xe))}}),L);return S=setTimeout(function(){d()},1200),_(l,!0),j("scrolling from index to",{index:ee,top:re,behavior:ge},ne.DEBUG),{top:re,behavior:ge}})),s),{scrollToIndex:x,topListHeight:I}},Z(Pe,me,Ke),{singleton:!0}),st="up",Lr={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollTop:0,viewportHeight:0,scrollHeight:0}},ht=W(function(e){var t=e[0],n=t.scrollContainerState,r=t.scrollTop,o=t.viewportHeight,i=t.headerHeight,l=t.footerHeight,u=t.scrollBy,s=b(!1),f=b(!0),c=k(),h=k(),m=b(4),x=b(0),I=fe(T(dn(T(F(r),wt(1),Ee(!0)),T(F(r),wt(1),Ee(!1),sn(100))),Y()),!1),v=fe(T(dn(T(u,Ee(!0)),T(u,Ee(!1),sn(200))),Y()),!1);E(T(ae(F(r),F(x)),R(function(a){return a[0]<=a[1]}),Y()),f),E(T(f,Xe(50)),h);var S=pe(T(ae(n,F(o),F(i),F(l),F(m)),ze(function(a,p){var w,y,z=p[0],H=z.scrollTop,P=z.scrollHeight,j=p[1],J={viewportHeight:j,scrollTop:H,scrollHeight:P};return H+j-P>-p[4]?(H>a.state.scrollTop?(w="SCROLLED_DOWN",y=a.state.scrollTop-H):(w="SIZE_DECREASED",y=a.state.scrollTop-H||a.scrollTopDelta),{atBottom:!0,state:J,atBottomBecause:w,scrollTopDelta:y}):{atBottom:!1,notAtBottomBecause:J.scrollHeight>a.state.scrollHeight?"SIZE_INCREASED":j<a.state.viewportHeight?"VIEWPORT_HEIGHT_DECREASING":H<a.state.scrollTop?"SCROLLING_UPWARDS":"NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",state:J}},Lr),Y(function(a,p){return a&&a.atBottom===p.atBottom}))),g=fe(T(n,ze(function(a,p){var w=p.scrollTop,y=p.scrollHeight;return a.scrollHeight!==y?a.scrollTop!==w&&w===y-p.viewportHeight?{scrollHeight:y,scrollTop:w,jump:a.scrollTop-w,changed:!0}:{scrollHeight:y,scrollTop:w,jump:0,changed:!0}:{scrollTop:w,scrollHeight:y,jump:0,changed:!1}},{scrollHeight:0,jump:0,scrollTop:0,changed:!1}),A(function(a){return a.changed}),R(function(a){return a.jump})),0);E(T(S,R(function(a){return a.atBottom})),s),E(T(s,Xe(50)),c);var d=b("down");E(T(n,R(function(a){return a.scrollTop}),Y(),ze(function(a,p){return ke(v)?{direction:a.direction,prevScrollTop:p}:{direction:p<a.prevScrollTop?st:"down",prevScrollTop:p}},{direction:"down",prevScrollTop:0}),R(function(a){return a.direction})),d),E(T(n,Xe(50),Ee("none")),d);var C=b(0);return E(T(I,A(function(a){return!a}),Ee(0)),C),E(T(r,Xe(100),V(I),A(function(a){return!!a[1]}),ze(function(a,p){return[a[1],p[0]]},[0,0]),R(function(a){return a[1]-a[0]})),C),{isScrolling:I,isAtTop:f,isAtBottom:s,atBottomState:S,atTopStateChange:h,atBottomStateChange:c,scrollDirection:d,atBottomThreshold:m,atTopThreshold:x,scrollVelocity:C,lastJumpDueToItemResize:g}},Z(me)),qe=W(function(e){var t=e[0].log,n=b(!1),r=pe(T(n,A(function(o){return o}),Y()));return U(n,function(o){o&&ke(t)("props updated",{},ne.DEBUG)}),{propsReady:n,didMount:r}},Z(Ke),{singleton:!0}),qt=W(function(e){var t=e[0],n=t.sizes,r=t.listRefresh,o=t.defaultItemSize,i=e[1].scrollTop,l=e[2].scrollToIndex,u=e[3].didMount,s=b(!0),f=b(0);return E(T(u,V(f),A(function(c){return!!c[1]}),Ee(!1)),s),U(T(ae(r,u),V(s,n,o),A(function(c){var h=c[1],m=c[3];return c[0][1]&&(!q(c[2].sizeTree)||m!==void 0)&&!h}),V(f)),function(c){var h=c[1];setTimeout(function(){Ge(i,function(){_(s,!0)}),_(l,h)})}),{scrolledToInitialItem:s,initialTopMostItemIndex:f}},Z(Pe,me,ft,qe),{singleton:!0});function mn(e){return!!e&&(e==="smooth"?"smooth":"auto")}var kr=W(function(e){var t=e[0],n=t.totalCount,r=t.listRefresh,o=e[1],i=o.isAtBottom,l=o.atBottomState,u=e[2].scrollToIndex,s=e[3].scrolledToInitialItem,f=e[4],c=f.propsReady,h=f.didMount,m=e[5].log,x=e[6].scrollingInProgress,I=b(!1),v=null;function S(g){_(u,{index:"LAST",align:"end",behavior:g})}return U(T(ae(T(F(n),wt(1)),h),V(F(I),i,s,x),R(function(g){var d=g[0],C=d[0],a=d[1]&&g[3],p="auto";return a&&(p=function(w,y){return typeof w=="function"?mn(w(y)):y&&mn(w)}(g[1],g[2]||g[4]),a=a&&!!p),{totalCount:C,shouldFollow:a,followOutputBehavior:p}}),A(function(g){return g.shouldFollow})),function(g){var d=g.totalCount,C=g.followOutputBehavior;v&&(v(),v=null),v=Ge(r,function(){ke(m)("following output to ",{totalCount:d},ne.DEBUG),S(C),v=null})}),U(T(ae(F(I),n,c),A(function(g){return g[0]&&g[2]}),ze(function(g,d){var C=d[1];return{refreshed:g.value===C,value:C}},{refreshed:!1,value:0}),A(function(g){return g.refreshed}),V(I,n)),function(g){var d=g[1],C=Ge(l,function(a){!d||a.atBottom||a.notAtBottomBecause!=="SIZE_INCREASED"||v||(ke(m)("scrolling to bottom due to increased size",{},ne.DEBUG),S("auto"))});setTimeout(C,100)}),U(ae(F(I),l),function(g){var d=g[1];g[0]&&!d.atBottom&&d.notAtBottomBecause==="VIEWPORT_HEIGHT_DECREASING"&&S("auto")}),{followOutput:I}},Z(Pe,ht,ft,qt,qe,Ke,me));function Pr(e){return e.reduce(function(t,n){return t.groupIndices.push(t.totalCount),t.totalCount+=n+1,t},{totalCount:0,groupIndices:[]})}var Gn=W(function(e){var t=e[0],n=t.totalCount,r=t.groupIndices,o=t.sizes,i=e[1],l=i.scrollTop,u=i.headerHeight,s=k(),f=k(),c=pe(T(s,R(Pr)));return E(T(c,R(xt("totalCount"))),n),E(T(c,R(xt("groupIndices"))),r),E(T(ae(l,o,u),A(function(h){return zt(h[1])}),R(function(h){return ye(h[1].groupOffsetTree,Math.max(h[0]-h[2],0),"v")[0]}),Y(),R(function(h){return[h]})),f),{groupCounts:s,topItemsIndexes:f}},Z(Pe,me));function dt(e,t){return!(!e||e[0]!==t[0]||e[1]!==t[1])}function Un(e,t){return!(!e||e.startIndex!==t.startIndex||e.endIndex!==t.endIndex)}function gn(e,t,n){return typeof e=="number"?n===st&&t==="top"||n==="down"&&t==="bottom"?e:0:n===st?t==="top"?e.main:e.reverse:t==="bottom"?e.main:e.reverse}function pn(e,t){return typeof e=="number"?e:e[t]||0}var Zt=W(function(e){var t=e[0],n=t.scrollTop,r=t.viewportHeight,o=t.deviation,i=t.headerHeight,l=t.fixedHeaderHeight,u=k(),s=b(0),f=b(0),c=b(0),h=fe(T(ae(F(n),F(r),F(i),F(u,dt),F(c),F(s),F(l),F(o),F(f)),R(function(m){var x=m[0],I=m[1],v=m[2],S=m[3],g=S[0],d=S[1],C=m[4],a=m[6],p=m[7],w=m[8],y=x-p,z=m[5]+a,H=Math.max(v-y,0),P="none",j=pn(w,"top"),J=pn(w,"bottom");return g-=p,d+=v+a,(g+=v+a)>x+z-j&&(P=st),(d-=p)<x-H+I+J&&(P="down"),P!=="none"?[Math.max(y-v-gn(C,"top",P)-j,0),y-H-a+I+gn(C,"bottom",P)+J]:null}),A(function(m){return m!=null}),Y(dt)),[0,0]);return{listBoundary:u,overscan:c,topListHeight:s,increaseViewportBy:f,visibleRange:h}},Z(me),{singleton:!0}),vn={items:[],topItems:[],offsetTop:0,offsetBottom:0,top:0,bottom:0,topListHeight:0,totalCount:0,firstItemIndex:0};function In(e,t,n){if(e.length===0)return[];if(!zt(t))return e.map(function(c){return O({},c,{index:c.index+n,originalIndex:c.index})});for(var r,o=[],i=Et(t.groupOffsetTree,e[0].index,e[e.length-1].index),l=void 0,u=0,s=Ue(e);!(r=s()).done;){var f=r.value;(!l||l.end<f.index)&&(l=i.shift(),u=t.groupIndices.indexOf(l.start)),o.push(O({},f.index===l.start?{type:"group",index:u}:{index:f.index-(u+1)+n,groupIndex:u},{size:f.size,offset:f.offset,originalIndex:f.index,data:f.data}))}return o}function vt(e,t,n,r,o){var i=0,l=0;if(e.length>0){i=e[0].offset;var u=e[e.length-1];l=u.offset+u.size}var s=i,f=r.lastOffset+(n-r.lastIndex)*r.lastSize-l;return{items:In(e,r,o),topItems:In(t,r,o),topListHeight:t.reduce(function(c,h){return h.size+c},0),offsetTop:i,offsetBottom:f,top:s,bottom:l,totalCount:n,firstItemIndex:o}}var rt=W(function(e){var t=e[0],n=t.sizes,r=t.totalCount,o=t.data,i=t.firstItemIndex,l=e[1],u=e[2],s=u.visibleRange,f=u.listBoundary,c=u.topListHeight,h=e[3],m=h.scrolledToInitialItem,x=h.initialTopMostItemIndex,I=e[4].topListHeight,v=e[5],S=e[6].didMount,g=e[7].recalcInProgress,d=b([]),C=k();E(l.topItemsIndexes,d);var a=fe(T(ae(S,F(s,dt),F(r),F(n),F(x),m,F(d),F(i),o),V(g),A(function(p){return p[0][0]&&!p[1]}),R(function(p){var w=p[0],y=w[1],z=y[0],H=y[1],P=w[2],j=w[4],J=w[5],X=w[6],ge=w[7],K=w[8],M=w[3],ee=M.sizeTree,re=M.offsetTree;if(P===0||z===0&&H===0)return vn;if(q(ee))return vt(function(ue,ce,Se){if(zt(ce)){var se=Wn(ue,ce);return[{index:ye(ce.groupOffsetTree,se)[0],size:0,offset:0},{index:se,size:0,offset:0,data:Se&&Se[0]}]}return[{index:ue,size:0,offset:0,data:Se&&Se[0]}]}(function(ue,ce){return typeof ue=="number"?ue:ue.index==="LAST"?ce-1:ue.index}(j,P),M,K),[],P,M,ge);var L=[];if(X.length>0)for(var D,oe=X[0],xe=X[X.length-1],Ce=0,Ze=Ue(Et(ee,oe,xe));!(D=Ze()).done;)for(var He=D.value,Oe=He.value,ve=Math.max(He.start,oe),Ie=Math.min(He.end,xe),We=ve;We<=Ie;We++)L.push({index:We,size:Oe,offset:Ce,data:K&&K[We]}),Ce+=Oe;if(!J)return vt([],L,P,M,ge);var Me=X.length>0?X[X.length-1]+1:0,it=function(ue,ce,Se,se){return se===void 0&&(se=0),se>0&&(ce=Math.max(ce,Nn(ue,se,_t).offset)),An((Ve=Se,Re=yt(Ae=ue,ce,Ne=Hr),mt=yt(Ae,Ve,Ne,Re),Ae.slice(Re,mt+1)),Rr);var Ae,Ve,Ne,Re,mt}(re,z,H,Me);if(it.length===0)return null;var Ye=P-1;return vt(Rt([],function(ue){for(var ce,Se=Ue(it);!(ce=Se()).done;){var se=ce.value,Ae=se.value,Ve=Ae.offset,Ne=se.start,Re=Ae.size;Ae.offset<z&&(Ve+=((Ne+=Math.floor((z-Ae.offset)/Re))-se.start)*Re),Ne<Me&&(Ve+=(Me-Ne)*Re,Ne=Me);for(var mt=Math.min(se.end,Ye),gt=Ne;gt<=mt&&!(Ve>=H);gt++)ue.push({index:gt,size:Re,offset:Ve,data:K&&K[gt]}),Ve+=Re}}),L,P,M,ge)}),A(function(p){return p!==null}),Y()),vn);return E(T(o,A(function(p){return p!==void 0}),R(function(p){return p.length})),r),E(T(a,R(xt("topListHeight"))),I),E(I,c),E(T(a,R(function(p){return[p.top,p.bottom]})),f),E(T(a,R(function(p){return p.items})),C),O({listState:a,topItemsIndexes:d,endReached:pe(T(a,A(function(p){return p.items.length>0}),V(r,o),A(function(p){var w=p[0].items;return w[w.length-1].originalIndex===p[1]-1}),R(function(p){return[p[1]-1,p[2]]}),Y(dt),R(function(p){return p[0]}))),startReached:pe(T(a,Xe(200),A(function(p){var w=p.items;return w.length>0&&w[0].originalIndex===p.topItems.length}),R(function(p){return p.items[0].index}),Y())),rangeChanged:pe(T(a,A(function(p){return p.items.length>0}),R(function(p){var w=p.items;return{startIndex:w[0].index,endIndex:w[w.length-1].index}}),Y(Un))),itemsRendered:C},v)},Z(Pe,Gn,Zt,qt,ft,ht,qe,Kt),{singleton:!0}),Or=W(function(e){var t=e[0],n=t.sizes,r=t.firstItemIndex,o=t.data,i=e[1].listState,l=e[2].didMount,u=b(0);return E(T(l,V(u),A(function(s){return s[1]!==0}),V(n,r,o),R(function(s){var f=s[0][1],c=s[1],h=s[2],m=s[3],x=m===void 0?[]:m,I=0;if(c.groupIndices.length>0)for(var v,S=Ue(c.groupIndices);!((v=S()).done||v.value-I>=f);)I++;var g=f+I;return vt(Array.from({length:g}).map(function(d,C){return{index:C,size:0,offset:0,data:x[C]}}),[],g,c,h)})),i),{initialItemCount:u}},Z(Pe,rt,qe),{singleton:!0}),$n=W(function(e){var t=e[0].scrollVelocity,n=b(!1),r=k(),o=b(!1);return E(T(t,V(o,n,r),A(function(i){return!!i[1]}),R(function(i){var l=i[0],u=i[1],s=i[2],f=i[3],c=u.enter;if(s){if((0,u.exit)(l,f))return!1}else if(c(l,f))return!0;return s}),Y()),n),U(T(ae(n,t,r),V(o)),function(i){var l=i[0],u=i[1];return l[0]&&u&&u.change&&u.change(l[1],l[2])}),{isSeeking:n,scrollSeekConfiguration:o,scrollVelocity:t,scrollSeekRangeChanged:r}},Z(ht),{singleton:!0}),Mr=W(function(e){var t=e[0].topItemsIndexes,n=b(0);return E(T(n,A(function(r){return r>0}),R(function(r){return Array.from({length:r}).map(function(o,i){return i})})),t),{topItemCount:n}},Z(rt)),Yt=W(function(e){var t=e[0],n=t.footerHeight,r=t.headerHeight,o=t.fixedHeaderHeight,i=e[1].listState,l=k(),u=fe(T(ae(n,r,o,i),R(function(s){var f=s[3];return s[0]+s[1]+s[2]+f.offsetBottom+f.bottom})),0);return E(F(u),l),{totalListHeight:u,totalListHeightChanged:l}},Z(me,rt),{singleton:!0});function Kn(e){var t,n=!1;return function(){return n||(n=!0,t=e()),t}}var Ar=Kn(function(){return/iP(ad|hone|od).+Version\/[\d.]+.*Safari/i.test(navigator.userAgent)}),Vr=W(function(e){var t=e[0],n=t.scrollBy,r=t.scrollTop,o=t.deviation,i=t.scrollingInProgress,l=e[1],u=l.isScrolling,s=l.isAtBottom,f=l.atBottomState,c=l.scrollDirection,h=e[3],m=h.beforeUnshiftWith,x=h.shiftWithOffset,I=h.sizes,v=e[4].log,S=pe(T(e[2].listState,V(l.lastJumpDueToItemResize),ze(function(d,C){var a=d[1],p=C[0],w=p.items,y=p.totalCount,z=p.bottom+p.offsetBottom,H=0;return d[2]===y&&a.length>0&&w.length>0&&(w[0].originalIndex===0&&a[0].originalIndex===0||(H=z-d[3])!=0&&(H+=C[1])),[H,w,y,z]},[0,[],0,0]),A(function(d){return d[0]!==0}),V(r,c,i,v,s,f),A(function(d){return!d[3]&&d[1]!==0&&d[2]===st}),R(function(d){var C=d[0][0];return(0,d[4])("Upward scrolling compensation",{amount:C},ne.DEBUG),C})));function g(d){d>0?(_(n,{top:-d,behavior:"auto"}),_(o,0)):(_(o,0),_(n,{top:-d,behavior:"auto"}))}return U(T(S,V(o,u)),function(d){var C=d[0],a=d[1];d[2]&&Ar()?_(o,a-C):g(-C)}),U(T(ae(fe(u,!1),o),A(function(d){return!d[0]&&d[1]!==0}),R(function(d){return d[1]}),Xe(1)),g),E(T(x,R(function(d){return{top:-d}})),n),E(T(m,V(I),R(function(d){return d[0]*d[1].lastSize})),S),{deviation:o}},Z(me,ht,rt,Pe,Ke)),Nr=W(function(e){var t=e[0].totalListHeight,n=e[1].didMount,r=e[2].scrollTo,o=b(0);return U(T(n,V(o),A(function(i){return i[1]!==0}),R(function(i){return{top:i[1]}})),function(i){Ge(T(t,A(function(l){return l!==0})),function(){setTimeout(function(){_(r,i)})})}),{initialScrollTop:o}},Z(Yt,qe,me),{singleton:!0}),Fr=W(function(e){var t=e[0].viewportHeight,n=e[1].totalListHeight,r=b(!1);return{alignToBottom:r,paddingTopAddition:fe(T(ae(r,t,n),A(function(o){return o[0]}),R(function(o){return Math.max(0,o[1]-o[2])}),Y()),0)}},Z(me,Yt),{singleton:!0}),_n=W(function(e){var t=e[0],n=t.scrollTo,r=t.scrollContainerState,o=k(),i=k(),l=k(),u=b(!1),s=b(void 0);return E(T(ae(o,i),R(function(f){var c=f[0],h=c.viewportHeight,m=c.scrollHeight;return{scrollTop:Math.max(0,c.scrollTop-f[1].offsetTop),scrollHeight:m,viewportHeight:h}})),r),E(T(n,V(i),R(function(f){var c=f[0];return O({},c,{top:c.top+f[1].offsetTop})})),l),{useWindowScroll:u,customScrollParent:s,windowScrollContainerState:o,windowViewportRect:i,windowScrollTo:l}},Z(me)),Dr=["done","behavior"],Wr=W(function(e){var t=e[0],n=t.sizes,r=t.totalCount,o=e[1],i=o.scrollTop,l=o.viewportHeight,u=o.headerHeight,s=o.scrollingInProgress,f=e[2].scrollToIndex,c=k();return E(T(c,V(n,l,r,u,i),R(function(h){var m=h[0],x=h[1],I=h[2],v=h[3],S=h[4],g=h[5],d=m.done,C=m.behavior,a=nt(m,Dr),p=null,w=Dn(m,x,v-1),y=ct(w,x.offsetTree)+S;return y<g?p=O({},a,{behavior:C,align:"start"}):y+ye(x.sizeTree,w)[1]>g+I&&(p=O({},a,{behavior:C,align:"end"})),p?d&&Ge(T(s,wt(1),A(function(z){return z===!1})),d):d&&d(),p}),A(function(h){return h!==null})),f),{scrollIntoView:c}},Z(Pe,me,ft,rt,Ke),{singleton:!0}),jr=["listState","topItemsIndexes"],Gr=W(function(e){return O({},e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])},Z(Zt,Or,qe,$n,Yt,Nr,Fr,_n,Wr)),qn=W(function(e){var t=e[0],n=t.totalCount,r=t.sizeRanges,o=t.fixedItemSize,i=t.defaultItemSize,l=t.trackItemSizes,u=t.itemSize,s=t.data,f=t.firstItemIndex,c=t.groupIndices,h=t.statefulTotalCount,m=e[1],x=m.initialTopMostItemIndex,I=m.scrolledToInitialItem,v=e[2],S=e[3],g=e[4],d=g.listState,C=g.topItemsIndexes,a=nt(g,jr),p=e[5].scrollToIndex,w=e[7].topItemCount,y=e[8].groupCounts,z=e[9],H=e[10];return E(a.rangeChanged,z.scrollSeekRangeChanged),E(T(z.windowViewportRect,R(xt("visibleHeight"))),v.viewportHeight),O({totalCount:n,data:s,firstItemIndex:f,sizeRanges:r,initialTopMostItemIndex:x,scrolledToInitialItem:I,topItemsIndexes:C,topItemCount:w,groupCounts:y,fixedItemHeight:o,defaultItemHeight:i},S,{statefulTotalCount:h,listState:d,scrollToIndex:p,trackItemSizes:l,itemSize:u,groupIndices:c},a,z,v,H)},Z(Pe,qt,me,kr,rt,ft,Vr,Mr,Gn,Gr,Ke)),Zn=Kn(function(){if(typeof document>"u")return"sticky";var e=document.createElement("div");return e.style.position="-webkit-sticky",e.style.position==="-webkit-sticky"?"-webkit-sticky":"sticky"});function Jt(e,t){var n=Q(null),r=je(function(s){if(s!==null){var f,c,h=s.getBoundingClientRect(),m=h.width;if(t){var x=t.getBoundingClientRect(),I=h.top-x.top;f=x.height-Math.max(0,I),c=I+t.scrollTop}else f=window.innerHeight-Math.max(0,h.top),c=h.top+window.pageYOffset;n.current={offsetTop:c,visibleHeight:f,visibleWidth:m},e(n.current)}},[e,t]),o=$t(r),i=o.callbackRef,l=o.ref,u=je(function(){r(l.current)},[r,l]);return he(function(){if(t){t.addEventListener("scroll",u);var s=new ResizeObserver(u);return s.observe(t),function(){t.removeEventListener("scroll",u),s.unobserve(t)}}return window.addEventListener("scroll",u),window.addEventListener("resize",u),function(){window.removeEventListener("scroll",u),window.removeEventListener("resize",u)}},[u,t]),i}var Ur=["placeholder"],$r=["style","children"],Kr=["style","children"];function Qt(e){return e}var _r=W(function(){var e=b(function(s){return"Item "+s}),t=b(null),n=b(function(s){return"Group "+s}),r=b({}),o=b(Qt),i=b("div"),l=b($e),u=function(s,f){return f===void 0&&(f=null),fe(T(r,R(function(c){return c[s]}),Y()),f)};return{context:t,itemContent:e,groupContent:n,components:r,computeItemKey:o,headerFooterTag:i,scrollerRef:l,FooterComponent:u("Footer"),HeaderComponent:u("Header"),TopItemListComponent:u("TopItemList"),ListComponent:u("List","div"),ItemComponent:u("Item","div"),GroupComponent:u("Group","div"),ScrollerComponent:u("Scroller","div"),EmptyPlaceholder:u("EmptyPlaceholder"),ScrollSeekPlaceholder:u("ScrollSeekPlaceholder")}});function Qe(e,t){var n=k();return U(n,function(){return console.warn("react-virtuoso: You are using a deprecated property. "+t,"color: red;","color: inherit;","color: blue;")}),E(n,e),n}var qr=W(function(e){var t=e[0],n=e[1],r={item:Qe(n.itemContent,"Rename the %citem%c prop to %citemContent."),group:Qe(n.groupContent,"Rename the %cgroup%c prop to %cgroupContent."),topItems:Qe(t.topItemCount,"Rename the %ctopItems%c prop to %ctopItemCount."),itemHeight:Qe(t.fixedItemHeight,"Rename the %citemHeight%c prop to %cfixedItemHeight."),scrollingStateChange:Qe(t.isScrolling,"Rename the %cscrollingStateChange%c prop to %cisScrolling."),adjustForPrependedItems:k(),maxHeightCacheSize:k(),footer:k(),header:k(),HeaderContainer:k(),FooterContainer:k(),ItemContainer:k(),ScrollContainer:k(),GroupContainer:k(),ListContainer:k(),emptyComponent:k(),scrollSeek:k()};function o(i,l,u){E(T(i,V(n.components),R(function(s){var f,c=s[0],h=s[1];return console.warn("react-virtuoso: "+u+" property is deprecated. Pass components."+l+" instead."),O({},h,((f={})[l]=c,f))})),n.components)}return U(r.adjustForPrependedItems,function(){console.warn("react-virtuoso: adjustForPrependedItems is no longer supported. Use the firstItemIndex property instead - https://virtuoso.dev/prepend-items.","color: red;","color: inherit;","color: blue;")}),U(r.maxHeightCacheSize,function(){console.warn("react-virtuoso: maxHeightCacheSize is no longer necessary. Setting it has no effect - remove it from your code.")}),U(r.HeaderContainer,function(){console.warn("react-virtuoso: HeaderContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the header component and pass components.Header to change its contents.")}),U(r.FooterContainer,function(){console.warn("react-virtuoso: FooterContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the footer component and pass components.Footer to change its contents.")}),U(r.scrollSeek,function(i){var l=i.placeholder,u=nt(i,Ur);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead."),_(n.components,O({},ke(n.components),{ScrollSeekPlaceholder:l})),_(t.scrollSeekConfiguration,u)}),o(r.footer,"Footer","footer"),o(r.header,"Header","header"),o(r.ItemContainer,"Item","ItemContainer"),o(r.ListContainer,"List","ListContainer"),o(r.ScrollContainer,"Scroller","ScrollContainer"),o(r.emptyComponent,"EmptyPlaceholder","emptyComponent"),o(r.GroupContainer,"Group","GroupContainer"),O({},t,n,r)},Z(qn,_r)),Zr=function(e){return B("div",{style:{height:e.height}})},Yr={position:Zn(),zIndex:1,overflowAnchor:"none"},Jr={overflowAnchor:"none"},Cn=be(function(e){var t=e.showTopList,n=t!==void 0&&t,r=N("listState"),o=Le("sizeRanges"),i=N("useWindowScroll"),l=N("customScrollParent"),u=Le("windowScrollContainerState"),s=Le("scrollContainerState"),f=l||i?u:s,c=N("itemContent"),h=N("context"),m=N("groupContent"),x=N("trackItemSizes"),I=N("itemSize"),v=N("log"),S=Ln(o,I,x,n?$e:f,v,l),g=S.callbackRef,d=S.ref,C=le(0),a=C[0],p=C[1];tn("deviation",function(M){a!==M&&(d.current.style.marginTop=M+"px",p(M))});var w=N("EmptyPlaceholder"),y=N("ScrollSeekPlaceholder")||Zr,z=N("ListComponent"),H=N("ItemComponent"),P=N("GroupComponent"),j=N("computeItemKey"),J=N("isSeeking"),X=N("groupIndices").length>0,ge=N("paddingTopAddition"),K=n?{}:{boxSizing:"border-box",paddingTop:r.offsetTop+ge,paddingBottom:r.offsetBottom,marginTop:a};return!n&&r.totalCount===0&&w?B(w,te(w,h)):B(z,O({},te(z,h),{ref:g,style:K,"data-test-id":n?"virtuoso-top-item-list":"virtuoso-item-list"}),(n?r.topItems:r.items).map(function(M){var ee=M.originalIndex,re=j(ee+r.firstItemIndex,M.data,h);return J?B(y,O({},te(y,h),{key:re,index:M.index,height:M.size,type:M.type||"item"},M.type==="group"?{}:{groupIndex:M.groupIndex})):M.type==="group"?B(P,O({},te(P,h),{key:re,"data-index":ee,"data-known-size":M.size,"data-item-index":M.index,style:Yr}),m(M.index)):B(H,O({},te(H,h),{key:re,"data-index":ee,"data-known-size":M.size,"data-item-index":M.index,"data-item-group-index":M.groupIndex,style:Jr}),X?c(M.index,M.groupIndex,M.data,h):c(M.index,M.data,h))}))}),Qr={height:"100%",outline:"none",overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},ot={width:"100%",height:"100%",position:"absolute",top:0},Xr={width:"100%",position:Zn(),top:0};function te(e,t){if(typeof e!="string")return{context:t}}var eo=be(function(){var e=N("HeaderComponent"),t=Le("headerHeight"),n=N("headerFooterTag"),r=_e(function(i){return t(Be(i,"height"))}),o=N("context");return e?B(n,{ref:r},B(e,te(e,o))):null}),to=be(function(){var e=N("FooterComponent"),t=Le("footerHeight"),n=N("headerFooterTag"),r=_e(function(i){return t(Be(i,"height"))}),o=N("context");return e?B(n,{ref:r},B(e,te(e,o))):null});function Xt(e){var t=e.usePublisher,n=e.useEmitter,r=e.useEmitterValue;return be(function(o){var i=o.style,l=o.children,u=nt(o,$r),s=t("scrollContainerState"),f=r("ScrollerComponent"),c=t("smoothScrollTargetReached"),h=r("scrollerRef"),m=r("context"),x=kn(s,c,f,h),I=x.scrollerRef,v=x.scrollByCallback;return n("scrollTo",x.scrollToCallback),n("scrollBy",v),B(f,O({ref:I,style:O({},Qr,i),"data-test-id":"virtuoso-scroller","data-virtuoso-scroller":!0,tabIndex:0},u,te(f,m)),l)})}function en(e){var t=e.usePublisher,n=e.useEmitter,r=e.useEmitterValue;return be(function(o){var i=o.style,l=o.children,u=nt(o,Kr),s=t("windowScrollContainerState"),f=r("ScrollerComponent"),c=t("smoothScrollTargetReached"),h=r("totalListHeight"),m=r("deviation"),x=r("customScrollParent"),I=r("context"),v=kn(s,c,f,$e,x),S=v.scrollerRef,g=v.scrollByCallback,d=v.scrollToCallback;return Tr(function(){return S.current=x||window,function(){S.current=null}},[S,x]),n("windowScrollTo",d),n("scrollBy",g),B(f,O({style:O({position:"relative"},i,h!==0?{height:h+m}:{}),"data-virtuoso-scroller":!0},u,te(f,I)),l)})}var no=function(e){var t=e.children,n=Le("viewportHeight"),r=_e(Ht(n,function(o){return Be(o,"height")}));return B("div",{style:ot,ref:r,"data-viewport-type":"element"},t)},ro=function(e){var t=e.children,n=Jt(Le("windowViewportRect"),N("customScrollParent"));return B("div",{ref:n,style:ot,"data-viewport-type":"window"},t)},oo=function(e){var t=e.children,n=N("TopItemListComponent"),r=N("headerHeight"),o=O({},Xr,{marginTop:r+"px"}),i=N("context");return B(n||"div",{style:o,context:i},t)},Bt=Ut(qr,{required:{},optional:{context:"context",followOutput:"followOutput",firstItemIndex:"firstItemIndex",itemContent:"itemContent",groupContent:"groupContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",react18ConcurrentRendering:"react18ConcurrentRendering",item:"item",group:"group",topItems:"topItems",itemHeight:"itemHeight",scrollingStateChange:"scrollingStateChange",maxHeightCacheSize:"maxHeightCacheSize",footer:"footer",header:"header",ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",GroupContainer:"GroupContainer",emptyComponent:"emptyComponent",HeaderContainer:"HeaderContainer",FooterContainer:"FooterContainer",scrollSeek:"scrollSeek"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",adjustForPrependedItems:"adjustForPrependedItems"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},be(function(e){var t=N("useWindowScroll"),n=N("topItemsIndexes").length>0,r=N("customScrollParent"),o=r||t?ro:no;return B(r||t?ao:lo,O({},e),B(o,null,B(eo,null),B(Cn,null),B(to,null)),n&&B(oo,null,B(Cn,{showTopList:!0})))})),io=Bt.Component,Le=Bt.usePublisher,N=Bt.useEmitterValue,tn=Bt.useEmitter,lo=Xt({usePublisher:Le,useEmitterValue:N,useEmitter:tn}),ao=en({usePublisher:Le,useEmitterValue:N,useEmitter:tn}),Sn={items:[],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},uo={items:[{index:0}],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},xn=Math.round,wn=Math.ceil,nn=Math.floor,Ot=Math.min,It=Math.max;function Tn(e,t){return Array.from({length:t-e+1}).map(function(n,r){return{index:r+e}})}var co=W(function(e){var t=e[0],n=t.overscan,r=t.visibleRange,o=t.listBoundary,i=e[1],l=i.scrollTop,u=i.viewportHeight,s=i.scrollBy,f=i.scrollTo,c=i.smoothScrollTargetReached,h=i.scrollContainerState,m=e[2],x=e[3],I=e[4],v=I.propsReady,S=I.didMount,g=e[5],d=g.windowViewportRect,C=g.windowScrollTo,a=g.useWindowScroll,p=g.customScrollParent,w=g.windowScrollContainerState,y=b(0),z=b(0),H=b(Sn),P=b({height:0,width:0}),j=b({height:0,width:0}),J=k(),X=k(),ge=b(0);E(T(S,V(z),A(function(L){return L[1]!==0}),R(function(L){return{items:Tn(0,L[1]-1),top:0,bottom:0,offsetBottom:0,offsetTop:0,itemHeight:0,itemWidth:0}})),H),E(T(ae(F(y),r,F(j,function(L,D){return L&&L.width===D.width&&L.height===D.height})),V(P),R(function(L){var D=L[0],oe=D[0],xe=D[1],Ce=xe[0],Ze=xe[1],He=D[2],Oe=L[1],ve=He.height,Ie=He.width,We=Oe.width;if(oe===0||We===0)return Sn;if(Ie===0)return uo;var Me=Yn(We,Ie),it=Me*nn(Ce/ve),Ye=Me*wn(Ze/ve)-1;Ye=It(0,Ot(oe-1,Ye));var ue=Tn(it=Ot(Ye,It(0,it)),Ye),ce=yn(Oe,He,ue),Se=ce.top,se=ce.bottom;return{items:ue,offsetTop:Se,offsetBottom:wn(oe/Me)*ve-se,top:Se,bottom:se,itemHeight:ve,itemWidth:Ie}})),H),E(T(P,R(function(L){return L.height})),u),E(T(ae(P,j,H),R(function(L){var D=yn(L[0],L[1],L[2].items);return[D.top,D.bottom]}),Y(dt)),o);var K=pe(T(F(H),A(function(L){return L.items.length>0}),V(y),A(function(L){var D=L[0].items;return D[D.length-1].index===L[1]-1}),R(function(L){return L[1]-1}),Y())),M=pe(T(F(H),A(function(L){var D=L.items;return D.length>0&&D[0].index===0}),Ee(0),Y())),ee=pe(T(F(H),A(function(L){return L.items.length>0}),R(function(L){var D=L.items;return{startIndex:D[0].index,endIndex:D[D.length-1].index}}),Y(Un)));E(ee,x.scrollSeekRangeChanged),E(T(J,V(P,j,y),R(function(L){var D=L[1],oe=L[2],xe=L[3],Ce=jn(L[0]),Ze=Ce.align,He=Ce.behavior,Oe=Ce.offset,ve=Ce.index;ve==="LAST"&&(ve=xe-1);var Ie=Ft(D,oe,ve=It(0,ve,Ot(xe-1,ve)));return Ze==="end"?Ie=xn(Ie-D.height+oe.height):Ze==="center"&&(Ie=xn(Ie-D.height/2+oe.height/2)),Oe&&(Ie+=Oe),{top:Ie,behavior:He}})),f);var re=fe(T(H,R(function(L){return L.offsetBottom+L.bottom})),0);return E(T(d,R(function(L){return{width:L.visibleWidth,height:L.visibleHeight}})),P),O({totalCount:y,viewportDimensions:P,itemDimensions:j,scrollTop:l,scrollHeight:X,overscan:n,scrollBy:s,scrollTo:f,scrollToIndex:J,smoothScrollTargetReached:c,windowViewportRect:d,windowScrollTo:C,useWindowScroll:a,customScrollParent:p,windowScrollContainerState:w,deviation:ge,scrollContainerState:h,initialItemCount:z},x,{gridState:H,totalListHeight:re},m,{startReached:M,endReached:K,rangeChanged:ee,propsReady:v})},Z(Zt,me,ht,$n,qe,_n));function yn(e,t,n){var r=t.height;return r===void 0||n.length===0?{top:0,bottom:0}:{top:Ft(e,t,n[0].index),bottom:Ft(e,t,n[n.length-1].index)+r}}function Ft(e,t,n){var r=Yn(e.width,t.width);return nn(n/r)*t.height}function Yn(e,t){return It(1,nn(e/t))}var so=["placeholder"],fo=W(function(){var e=b(function(s){return"Item "+s}),t=b({}),n=b(null),r=b("virtuoso-grid-item"),o=b("virtuoso-grid-list"),i=b(Qt),l=b($e),u=function(s,f){return f===void 0&&(f=null),fe(T(t,R(function(c){return c[s]}),Y()),f)};return{context:n,itemContent:e,components:t,computeItemKey:i,itemClassName:r,listClassName:o,scrollerRef:l,ListComponent:u("List","div"),ItemComponent:u("Item","div"),ScrollerComponent:u("Scroller","div"),ScrollSeekPlaceholder:u("ScrollSeekPlaceholder","div")}}),ho=W(function(e){var t=e[0],n=e[1],r={item:Qe(n.itemContent,"Rename the %citem%c prop to %citemContent."),ItemContainer:k(),ScrollContainer:k(),ListContainer:k(),emptyComponent:k(),scrollSeek:k()};function o(i,l,u){E(T(i,V(n.components),R(function(s){var f,c=s[0],h=s[1];return console.warn("react-virtuoso: "+u+" property is deprecated. Pass components."+l+" instead."),O({},h,((f={})[l]=c,f))})),n.components)}return U(r.scrollSeek,function(i){var l=i.placeholder,u=nt(i,so);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead."),_(n.components,O({},ke(n.components),{ScrollSeekPlaceholder:l})),_(t.scrollSeekConfiguration,u)}),o(r.ItemContainer,"Item","ItemContainer"),o(r.ListContainer,"List","ListContainer"),o(r.ScrollContainer,"Scroller","ScrollContainer"),O({},t,n,r)},Z(co,fo)),mo=be(function(){var e=de("gridState"),t=de("listClassName"),n=de("itemClassName"),r=de("itemContent"),o=de("computeItemKey"),i=de("isSeeking"),l=et("scrollHeight"),u=de("ItemComponent"),s=de("ListComponent"),f=de("ScrollSeekPlaceholder"),c=de("context"),h=et("itemDimensions"),m=_e(function(x){l(x.parentElement.parentElement.scrollHeight);var I=x.firstChild;I&&h(I.getBoundingClientRect())});return B(s,O({ref:m,className:t},te(s,c),{style:{paddingTop:e.offsetTop,paddingBottom:e.offsetBottom}}),e.items.map(function(x){var I=o(x.index);return i?B(f,O({key:I},te(f,c),{index:x.index,height:e.itemHeight,width:e.itemWidth})):B(u,O({},te(u,c),{className:n,"data-index":x.index,key:I}),r(x.index,c))}))}),go=function(e){var t=e.children,n=et("viewportDimensions"),r=_e(function(o){n(o.getBoundingClientRect())});return B("div",{style:ot,ref:r},t)},po=function(e){var t=e.children,n=Jt(et("windowViewportRect"),de("customScrollParent"));return B("div",{ref:n,style:ot},t)},rn=Ut(ho,{optional:{totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",item:"item",ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",scrollSeek:"scrollSeek"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange"}},be(function(e){var t=O({},e),n=de("useWindowScroll"),r=de("customScrollParent"),o=r||n?po:go;return B(r||n?Io:vo,O({},t),B(o,null,B(mo,null)))})),et=rn.usePublisher,de=rn.useEmitterValue,Jn=rn.useEmitter,vo=Xt({usePublisher:et,useEmitterValue:de,useEmitter:Jn}),Io=en({usePublisher:et,useEmitterValue:de,useEmitter:Jn}),Co=W(function(){var e=b(function(u){return B("td",null,"Item $",u)}),t=b(null),n=b(null),r=b({}),o=b(Qt),i=b($e),l=function(u,s){return s===void 0&&(s=null),fe(T(r,R(function(f){return f[u]}),Y()),s)};return{context:t,itemContent:e,fixedHeaderContent:n,components:r,computeItemKey:o,scrollerRef:i,TableComponent:l("Table","table"),TableHeadComponent:l("TableHead","thead"),TableBodyComponent:l("TableBody","tbody"),TableRowComponent:l("TableRow","tr"),ScrollerComponent:l("Scroller","div"),EmptyPlaceholder:l("EmptyPlaceholder"),ScrollSeekPlaceholder:l("ScrollSeekPlaceholder"),FillerRow:l("FillerRow")}}),So=W(function(e){return O({},e[0],e[1])},Z(qn,Co)),xo=function(e){return B("tr",null,B("td",{style:{height:e.height}}))},wo=function(e){return B("tr",null,B("td",{style:{height:e.height,padding:0,border:0}}))},To=be(function(){var e=$("listState"),t=Fe("sizeRanges"),n=$("useWindowScroll"),r=$("customScrollParent"),o=Fe("windowScrollContainerState"),i=Fe("scrollContainerState"),l=r||n?o:i,u=$("itemContent"),s=$("trackItemSizes"),f=Ln(t,$("itemSize"),s,l,$("log"),r),c=f.callbackRef,h=f.ref,m=le(0),x=m[0],I=m[1];ln("deviation",function(K){x!==K&&(h.current.style.marginTop=K+"px",I(K))});var v=$("EmptyPlaceholder"),S=$("ScrollSeekPlaceholder")||xo,g=$("FillerRow")||wo,d=$("TableBodyComponent"),C=$("TableRowComponent"),a=$("computeItemKey"),p=$("isSeeking"),w=$("paddingTopAddition"),y=$("firstItemIndex"),z=$("statefulTotalCount"),H=$("context");if(z===0&&v)return B(v,te(v,H));var P=e.offsetTop+w+x,j=e.offsetBottom,J=P>0?B(g,{height:P,key:"padding-top"}):null,X=j>0?B(g,{height:j,key:"padding-bottom"}):null,ge=e.items.map(function(K){var M=K.originalIndex,ee=a(M+y,K.data,H);return p?B(S,O({},te(S,H),{key:ee,index:K.index,height:K.size,type:K.type||"item"})):B(C,O({},te(C,H),{key:ee,"data-index":M,"data-known-size":K.size,"data-item-index":K.index,style:{overflowAnchor:"none"}}),u(K.index,K.data,H))});return B(d,O({ref:c,"data-test-id":"virtuoso-item-list"},te(d,H)),[J].concat(ge,[X]))}),yo=function(e){var t=e.children,n=Fe("viewportHeight"),r=_e(Ht(n,function(o){return Be(o,"height")}));return B("div",{style:ot,ref:r,"data-viewport-type":"element"},t)},bo=function(e){var t=e.children,n=Jt(Fe("windowViewportRect"),$("customScrollParent"));return B("div",{ref:n,style:ot,"data-viewport-type":"window"},t)},on=Ut(So,{required:{},optional:{context:"context",followOutput:"followOutput",firstItemIndex:"firstItemIndex",itemContent:"itemContent",fixedHeaderContent:"fixedHeaderContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",react18ConcurrentRendering:"react18ConcurrentRendering"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},be(function(e){var t=$("useWindowScroll"),n=$("customScrollParent"),r=Fe("fixedHeaderHeight"),o=$("fixedHeaderContent"),i=$("context"),l=_e(Ht(r,function(m){return Be(m,"height")})),u=n||t?Ro:Ho,s=n||t?bo:yo,f=$("TableComponent"),c=$("TableHeadComponent"),h=o?B(c,O({key:"TableHead",style:{zIndex:1,position:"sticky",top:0},ref:l},te(c,i)),o()):null;return B(u,O({},e),B(s,null,B(f,O({style:{borderSpacing:0}},te(f,i)),[h,B(To,{key:"TableBody"})])))})),Fe=on.usePublisher,$=on.useEmitterValue,ln=on.useEmitter,Ho=Xt({usePublisher:Fe,useEmitterValue:$,useEmitter:ln}),Ro=en({usePublisher:Fe,useEmitterValue:$,useEmitter:ln}),Eo=io;const{dataList:zo}=Rn(1e3),Bo=()=>{const[e,t]=le(zo);return he(()=>{setInterval(()=>{t(n=>{const r=Wt();return 5+1,jt.lorem.sentences(),[...n],n})},2e3)},[]),G(Eo,{style:{height:800,width:400},className:"border",totalCount:e.length,itemContent:n=>{const r=e[n];return G("div",{className:"border",children:[G("h4",{children:r.index}),G("p",{children:r.content})]})}})},Lo=()=>{const[e,t]=le(0),{Input:n}=nr(),r=[{title:"固定行高",com:G(dr,{})},{title:"动态行高 Array",com:G(ar,{})},{title:"动态行高 Object",com:G(ur,{})},{title:"react-virtuoso",com:G(Bo,{})}];return G("div",{children:G("div",{className:"mb-5",children:[G(n,{className:"mr-2"}),r.map(({title:o},i)=>G("button",{className:Dt("mr-2 mb-4",e===i&&"bg-gray-200"),onClick:()=>t(i),children:o},o)),r[e].com]})})},Ao=Object.freeze(Object.defineProperty({__proto__:null,default:Lo},Symbol.toStringTag,{value:"Module"}));export{Mo as a,Rn as g,Ao as i,nr as u};
