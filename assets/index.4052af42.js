import{d as g}from"./dayjs.min.9bf2e87d.js";import{r as l,j as e}from"./index.44e6a75f.js";import{A as D,a as E}from"./index.esm.465e8df7.js";import{O as m,g as M,a as N,W as O,b as p}from"./utils.b8a06f7c.js";import{v as j}from"./v4.90f1a8cc.js";import"./_commonjsHelpers.294d03c4.js";const x=15,w=8;const k=t=>{const{todo:a,today:h,container:z}=t,{startTime:r,endTime:c,title:f}=a,u=l.exports.useRef(null);return l.exports.useEffect(()=>{const o=u.current;if(!o)return;const s=n=>{const d=n.target;if(!d)return;n.clientY,d.classList.contains("resize-top");const v=i=>{},b=i=>{};document.addEventListener("mousemove",v),document.addEventListener("mouseup",b)};return o.addEventListener("mousedown",s),()=>{o.removeEventListener("mousedown",s)}},[]),!r||!c?null:e.exports.jsxs("div",{ref:u,className:"absolute border rounded w-full bg-green-100",style:{top:(r-h)/m*x+w,height:(c-r)/m*x},children:[f,e.exports.jsx("div",{className:"resize-top"}),e.exports.jsx("div",{className:"resize-bottom"})]})},C=t=>[{id:j(),title:1,startTime:t+3*N,endTime:t+4*N}],L=()=>{const[t,a]=l.exports.useState(M(Date.now())),[h,z]=l.exports.useState(C(t)),r=l.exports.useRef(null),c=o=>{const s=r.current;if(!s)return;const n=s.getBoundingClientRect(),d=o.clientY-n.y,v=s.scrollTop+d-w,b=Math.floor(v/x),i=t+b*m,T=i+N;i>=t+p||z(y=>y.concat({id:j(),title:1,startTime:i,endTime:T}))},f=g(t).format("YYYY\u5E74MM\u6708DD\u65E5"),u=O[g(t).day()];return e.exports.jsxs("div",{className:"relative overflow-auto h-full flex flex-col",children:[e.exports.jsxs("div",{className:"flex items-center border-b mb-2",children:[e.exports.jsx("button",{onClick:()=>a(t-p),className:"hover:bg-gray-200 rounded",children:e.exports.jsx(D,{className:"h-5 w-5"})}),e.exports.jsx("button",{onClick:()=>a(t+p),className:"hover:bg-gray-200 rounded ml-2",children:e.exports.jsx(E,{className:"h-5 w-5"})}),e.exports.jsx("p",{className:"ml-4",children:`${f} \u5468${u}`})]}),e.exports.jsx("div",{className:"overflow-auto flex-1",onDoubleClick:c,ref:r,children:e.exports.jsxs("div",{className:"relative ml-[55px] pt-2",children:[new Array(25).fill(1).map((o,s)=>e.exports.jsx("div",{style:{height:x*4},className:"relative h-[1px] border-t",children:e.exports.jsx("span",{className:"absolute -translate-x-full -translate-y-1/2 -ml-2",children:g(t+s*m*4).format("HH:mm")})},s)),e.exports.jsx("div",{className:"absolute top-0 left-0 w-full",onDoubleClick:o=>o.stopPropagation(),children:h.map(o=>{const{startTime:s,endTime:n}=o;return!s||!n||s<t||s>t+p?null:e.exports.jsx(k,{today:t,todo:o,container:r.current},o.id)})})]})})]})},H=()=>e.exports.jsx(L,{});export{H as default};
