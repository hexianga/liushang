import{_ as R,p as W,a1 as I,e as f,b as k}from"./calendar-c06bd7ad.js";import{t as v}from"./lodash-6a49fb5a.js";const Y=()=>{const p=R(null),O=R(null),u=R(),[e,b]=W(),[x,C]=W(0),D=(t=0)=>{const n=p.current,o=O.current;if(!n||!o)return;const i=t%180===0?n.width:n.height,c=t%180===0?n.height:n.width,s=o.clientWidth,a=o.clientHeight,h=s/i,r=a/c,d=Math.min(h,r);let l=i,g=c;d<1&&(l=d===h?s:i*r,g=d===r?a:c*h);const w={width:l,height:g,left:(s-l)/2,top:(a-g)/2};u.current=w,b(w)},m=I((t=.8,n={xOffsetImage:.5,yOffsetImage:.5})=>{b(o=>{if(!o)return;const{width:i,height:c,left:s,top:a}=o,h=i*t,r=c*t;if(u.current){const{width:g,height:w}=u.current;if(h<=g||r<=w)return u.current}const d=Math.abs(h-i),l=Math.abs(r-c);return{width:h,height:r,left:t<1?s+d*n.xOffsetImage:s-d*n.xOffsetImage,top:t<1?a+l*n.yOffsetImage:a-l*n.yOffsetImage}})},[]),y=I(t=>{t.preventDefault();const n=p.current;if(!n)return;const o=n.getBoundingClientRect(),i={xOffsetImage:(t.clientX-o.x)/o.width,yOffsetImage:(t.clientY-o.y)/o.height};m(1-t.deltaY/100/2,i)},[m]),H=I(v(y,60),[y]);return f("div",{children:[f("button",{onClick:()=>m(1.1),children:"放大"}),f("button",{onClick:()=>m(.9),children:"缩小"}),f("button",{onClick:()=>{const t=x+90;C(t)},children:"旋转"}),f("div",{onWheel:H,ref:O,className:"relative h-[500px] w-[1000px] overflow-hidden border border-red-400",children:f("img",{ref:p,src:"/images/1.png",onLoad:()=>D(),onWheel:t=>t.preventDefault(),className:k("absolute duration-200",!e&&"opacity-0"),style:{width:e==null?void 0:e.width,height:e==null?void 0:e.height,top:e==null?void 0:e.top,left:e==null?void 0:e.left,transform:`rotate(${x}deg)`}})})]})};export{Y as default};
