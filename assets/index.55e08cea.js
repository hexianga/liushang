import{e as s,_ as g,p as x,h as v,a as y}from"./calendar.bb17f51b.js";import"./lodash.49e6853f.js";const R=({paragraph:e})=>{const{uuid:c,nodes:a,style:n}=e,d={background:n==null?void 0:n.background};return s("div",{style:d,"data-para-id":c,children:a.map(t=>s(b,{text:t},t.uuid))})},b=({text:e})=>{const{uuid:c,content:a,style:n}=e,d={};return n!=null&&n.bold&&(d.fontWeight="bold"),n!=null&&n.italic&&(d.fontStyle="italic"),s("span",{"data-leaf-id":c,style:d,children:a})};var f=(e=>(e.DOCUMENT="document",e.PARAGRAPH="paragraph",e.TEXT="text",e))(f||{});const T=()=>{const e=g(null),c=g(null),a=g(null);x();const[n,d]=x({uuid:"1",type:f.DOCUMENT,nodes:[{uuid:"2",type:f.PARAGRAPH,nodes:[{uuid:"3",type:f.TEXT,content:"12345"}]}]});return v(()=>{const t=a.current;if(!t)return;const l=h=>{},p=h=>{};return t.addEventListener("beforeinput",l),t.addEventListener("input",p),()=>{t.removeEventListener("beforeinput",l),t.removeEventListener("input",p)}},[]),v(()=>{const t=c.current,l=e.current;if(!l||!t)return;const p=()=>{const i=window.getSelection();if(!!i){if(i.type==="None"){t.style.cssText="";return}if(i.type==="Caret"){const u=i.getRangeAt(0).getClientRects(),r=Array.from(u)[0];if(!r)return;t.style.cssText=`
          left: ${r.left}px;
          top:  ${r.top}px;
          height:  ${r.height}px;
        `;const m=a.current;if(!m)return;m.style.cssText=`
          left: ${r.left}px;
          top:  ${r.top}px;
          height:  ${r.height}px;
          width: 1px;
          `,m.focus()}else t.style.cssText=""}},h=i=>{let o,u;document.caretRangeFromPoint?(o=document.caretRangeFromPoint(i.clientX,i.clientY),u=o==null?void 0:o.startContainer):document.caretPositionFromPoint&&(o=document.caretPositionFromPoint(i.clientX,i.clientY),u=o==null?void 0:o.offsetNode),(u==null?void 0:u.nodeType)===3&&setTimeout(()=>{const r=window.getSelection();!r||!(o instanceof Range)||r.addRange(o)})};return l.addEventListener("click",h),document.addEventListener("selectionchange",p),()=>{document.removeEventListener("selectionchange",p)}},[e,c]),s(y,{children:s("div",{className:"text-h1 text-4xl",ref:e,children:[n.nodes.map(t=>s(R,{paragraph:t},t.uuid)),s("div",{ref:c,className:"custom-cursor"}),s("input",{ref:a,className:"placeholder-editor fixed top-0 left-0 w-[1px] opacity-0"})]})})};export{T as default};
