import{e as c,_ as m,p as x,h as v,a as R}from"./calendar-c06bd7ad.js";import"./lodash-6a49fb5a.js";const y=({paragraph:e})=>{const{uuid:s,nodes:a,style:n}=e,u={background:n==null?void 0:n.background};return c("div",{style:u,"data-para-id":s,children:a.map(t=>c(E,{text:t},t.uuid))})},E=({text:e})=>{const{uuid:s,content:a,style:n}=e,u={};return n!=null&&n.bold&&(u.fontWeight="bold"),n!=null&&n.italic&&(u.fontStyle="italic"),c("span",{"data-leaf-id":s,style:u,children:a})};var f=(e=>(e.DOCUMENT="document",e.PARAGRAPH="paragraph",e.TEXT="text",e))(f||{});const b=()=>{const e=m(null),s=m(null),a=m(null);x();const[n,u]=x({uuid:"1",type:f.DOCUMENT,nodes:[{uuid:"2",type:f.PARAGRAPH,nodes:[{uuid:"3",type:f.TEXT,content:"12345"}]}]});return v(()=>{const t=a.current;if(!t)return;const l=h=>{},p=h=>{};return t.addEventListener("beforeinput",l),t.addEventListener("input",p),()=>{t.removeEventListener("beforeinput",l),t.removeEventListener("input",p)}},[]),v(()=>{const t=s.current,l=e.current;if(!l||!t)return;const p=()=>{const i=window.getSelection();if(i){if(i.type==="None"){t.style.cssText="";return}if(i.type==="Caret"){const d=i.getRangeAt(0).getClientRects(),o=Array.from(d)[0];if(!o)return;t.style.cssText=`
          left: ${o.left}px;
          top:  ${o.top}px;
          height:  ${o.height}px;
        `;const g=a.current;if(!g)return;g.style.cssText=`
          left: ${o.left}px;
          top:  ${o.top}px;
          height:  ${o.height}px;
          width: 1px;
          `,g.focus()}else t.style.cssText=""}},h=i=>{let r,d;document.caretRangeFromPoint?(r=document.caretRangeFromPoint(i.clientX,i.clientY),d=r==null?void 0:r.startContainer):document.caretPositionFromPoint&&(r=document.caretPositionFromPoint(i.clientX,i.clientY),d=r==null?void 0:r.offsetNode),(d==null?void 0:d.nodeType)===3&&setTimeout(()=>{const o=window.getSelection();!o||!(r instanceof Range)||o.addRange(r)})};return l.addEventListener("click",h),document.addEventListener("selectionchange",p),()=>{document.removeEventListener("selectionchange",p)}},[e,s]),c(R,{children:c("div",{className:"text-h1 text-4xl",ref:e,children:[n.nodes.map(t=>c(y,{paragraph:t},t.uuid)),c("div",{ref:s,className:"custom-cursor"}),c("input",{ref:a,className:"placeholder-editor fixed top-0 left-0 w-[1px] opacity-0"})]})})};export{b as default};
