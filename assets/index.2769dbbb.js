import{r as g,j as G,b as Nn}from"./index.7adf6b61.js";import{c as Dn}from"./index.5729db34.js";import{u as Wn}from"./use-input.585f989d.js";import{g as hn,a as Gn,N as Un}from"./mock.54c533d5.js";import{v as Kn}from"./v4.90f1a8cc.js";import"./index.563d4b32.js";import"./index.28d32a59.js";const Ce=40,pt=5,{idList:$n,dataList:qn,dataMap:Yn}=hn(1e3),Zn=()=>{const[e,t]=g.exports.useState(qn),n=g.exports.useRef(null),r=g.exports.useRef(null),o=g.exports.useRef([]),[i,l]=g.exports.useState([0,Math.min(Math.ceil(window.innerHeight/Ce),e.length)]);g.exports.useEffect(()=>{e.forEach((u,m)=>{const x={id:u.id,bottom:(m+1)*Ce,height:Ce,diffHeight:0};o.current.push(x)})},[]),g.exports.useEffect(()=>{const u=r.current;!u||(u.style.height=`${e.length*Ce}px`)},[]),g.exports.useEffect(()=>{const u=n.current,m=r.current;if(!u||!m)return;const x=I=>{const v=o.current;let S=0,p=v.length-1,f=0;for(;S<=p;){f=Math.floor((S+p)/2);const s=v[f];if(s.bottom===I)break;s.bottom<I&&(S=f+1),s.bottom>I&&(p=f-1)}return o.current[f].bottom<I&&f++,f},w=()=>{const I=u.getBoundingClientRect(),v=m.getBoundingClientRect(),S=I.top-v.top,p=Math.ceil(u.clientHeight/Ce),f=x(S),C=Math.max(f-pt,0);l(s=>s[0]===C?s:[C,C+p+pt])};return u.addEventListener("scroll",w),()=>{u.removeEventListener("scroll",w)}},[]),g.exports.useEffect(()=>{const u=r.current;if(!u)return;const m=u.childNodes;m.forEach(p=>{const f=Number(p.dataset.index),C=o.current[f].height,s=p.offsetHeight,h=C-s;h!==0&&(o.current[f].height=s,o.current[f].diffHeight=h)});let x=0;const w=m[0],I=Number(w.dataset.index),v=o.current.length;for(let p=I;p<v;p++){const f=o.current[p];f.diffHeight!==0&&(x+=f.diffHeight,f.diffHeight=0),f.bottom=f.bottom-x}const S=o.current[v-1].bottom;u.style.height=`${S}px`},[i]);const a=(u,m)=>G.exports.jsx(G.exports.Fragment,{children:e.slice(u,m).map((x,w)=>G.exports.jsxs("div",{className:"border-b p-2","data-index":u+w,"data-uuid":x.id,children:[G.exports.jsx("span",{className:"font-bold text-[blue]",children:x.index})," ",x.content]},u+w))}),c=i[0],d=i[1];return G.exports.jsx("div",{ref:n,className:"h-[800px] w-[400px] overflow-auto border",children:G.exports.jsx("div",{ref:r,className:"relative w-full",style:{paddingTop:`${c>=1?o.current[c-1].bottom:0}px`},children:a(c,d)})})},Jn=()=>{const[e]=g.exports.useState($n),t=g.exports.useRef(null),n=g.exports.useRef(null),r=g.exports.useRef(null),o=g.exports.useRef({}),[i,l]=g.exports.useState([0,Math.min(Math.ceil(window.innerHeight/Ce),e.length)]),a=g.exports.useRef(e);a.current=e,g.exports.useEffect(()=>{const I=n.current;!I||(I.style.height=`${e.length*Ce}px`)},[]),g.exports.useEffect(()=>{e.forEach((I,v)=>{o.current[I]={id:I,bottom:(v+1)*Ce,height:Ce,diffHeight:0}})},[]),g.exports.useEffect(()=>{const I=r.current,v=n.current;if(!I||!v)return;I.childNodes.forEach(y=>{const z=y.dataset.uuid;if(!z)return;const R=o.current[z].height,P=y.offsetHeight,W=R-P;W!==0&&(o.current[z].height=P,o.current[z].diffHeight=W)});let p=0;const f=i[0],C=a.current.length;for(let y=f;y<C;y++){const z=a.current[y],R=o.current[z];R.diffHeight!==0&&(p+=R.diffHeight,R.diffHeight=0),R.bottom=R.bottom-p}const s=a.current[C-1],T=o.current[s].bottom;v.style.height=`${T}px`},[i]);const c=I=>{const v=o.current;let S=0,p=a.current.length-1,f=0,C="";for(;S<=p;){f=Math.floor((S+p)/2),C=a.current[f];const h=v[C];if(h.bottom===I)break;h.bottom<I&&(S=f+1),h.bottom>I&&(p=f-1)}return C=a.current[f],v[C].bottom<I&&f++,f};g.exports.useEffect(()=>{const I=t.current,v=r.current,S=n.current;if(!I||!v||!S)return;const p=()=>{const f=I.getBoundingClientRect(),C=S.getBoundingClientRect(),s=f.top-C.top,h=Math.ceil(I.clientHeight/Ce),T=c(s),y=Math.max(T-pt,0);i[0]!==y&&l([y,y+h+pt])};return I.addEventListener("scroll",p),()=>{I.removeEventListener("scroll",p)}},[i]);const d=(I,v)=>G.exports.jsx(G.exports.Fragment,{children:e.slice(I,v).map(S=>{const p=Yn[S];return G.exports.jsxs("div",{className:"border-b p-2","data-uuid":S,children:[G.exports.jsx("span",{className:"font-bold text-[blue]",children:p.index})," ",p.content]},S)})}),u=i[0],m=i[1],x=e[u],w=`translate3d(0,${u>=1?o.current[x].bottom:0}px,0)`;return G.exports.jsx("div",{ref:t,className:"h-[800px] w-[400px] overflow-auto border",children:G.exports.jsx("div",{ref:n,className:"relative w-full",children:G.exports.jsx("div",{ref:r,className:"absolute top-0 w-full",style:{transform:w},children:d(u,m)})})})},Qn=(e,t)=>{let n;Promise.resolve().then(()=>n=Date.now());const r=()=>{Date.now()-n>=t?e():o.id=requestAnimationFrame(r)},o={id:requestAnimationFrame(r)};return o},Xn=()=>{const[e,t]=g.exports.useState(!1),n=g.exports.useRef(!1),r=g.exports.useRef(),o=g.exports.useCallback(i=>{var l;n.current?((l=r.current)!=null&&l.id&&cancelAnimationFrame(r.current.id),r.current=Qn(()=>{r.current=void 0,t(!1),n.current=!1,i==null||i()},200)):(t(!0),n.current=!0)},[]);return{isScrolling:e,checkScrollEnded:o,isScrollingRef:n}},$e=40,Jt=20,_n=()=>{const[e]=g.exports.useState(Gn(1e4)),t=g.exports.useRef(null),n=g.exports.useRef(null),r=g.exports.useRef(0),[o,i]=g.exports.useState([0,Math.min(Math.ceil(window.innerHeight/$e),e.length)]),l=g.exports.useRef(0);l.current=o[0];const{checkScrollEnded:a}=Xn();g.exports.useEffect(()=>{const u=t.current,m=n.current;if(!u||!m)return;const x=()=>{const w=u.getBoundingClientRect(),I=m.getBoundingClientRect(),v=Math.ceil(u.clientHeight/$e),S=w.top-I.top;a(()=>console.log("scroll end"));let p="bottom";S<r.current&&(p="top"),r.current=S;const f=Math.floor(S/$e);let C=0,s=0;p==="bottom"?(C=f,s=f+v+Jt):(C=Math.max(f-Jt,0),s=f+v),l.current!==C&&i([C,s])};return u.addEventListener("scroll",x),()=>{u.removeEventListener("scroll",x)}},[a]);const c=o[0],d=o[1];return G.exports.jsx("div",{className:"relative box-border h-[800px] w-96 overflow-y-scroll border",ref:t,children:G.exports.jsx("div",{style:{height:`${e.length*$e}px`},ref:n,children:e.slice(c,d).map((u,m)=>G.exports.jsx("div",{className:"absolute w-full border-b-[1px]",style:{top:`${(c+m)*$e}px`,height:$e},children:G.exports.jsx("div",{className:"flex h-full items-center px-4",children:u.index})},u.id))})})};var It=0,Ae=1,Je=2,gn=4;function Ct(e,t){return function(n){return e(t(n))}}function er(e,t){return t(e)}function vn(e,t){return function(n){return e(t,n)}}function Qt(e,t){return function(){return e(t)}}function ht(e){return function(t){return t[e]}}function St(e,t){return t(e),e}function Z(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t}function tr(e){e()}function Xt(e){return function(){return e}}function nr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(){t.map(tr)}}function Ne(){}function U(e,t){return e(Ae,t)}function q(e,t){e(It,t)}function Pt(e){e(Je)}function He(e){return e(gn)}function B(e,t){return U(e,vn(t,It))}function Ve(e,t){var n=e(Ae,function(r){n(),t(r)});return n}function k(){var e=[];return function(t,n){switch(t){case Je:e.splice(0,e.length);return;case Ae:return e.push(n),function(){var r=e.indexOf(n);r>-1&&e.splice(r,1)};case It:e.slice().forEach(function(r){r(n)});return;default:throw new Error("unrecognized action "+t)}}}function E(e){var t=e,n=k();return function(r,o){switch(r){case Ae:var i=o;i(t);break;case It:t=o;break;case gn:return t}return n(r,o)}}function rr(e){var t,n,r=function(){return t&&t()};return function(o,i){switch(o){case Ae:return i?n===i?void 0:(r(),n=i,t=U(e,i),t):(r(),Ne);case Je:r(),n=null;return;default:throw new Error("unrecognized action "+o)}}}function me(e){return St(k(),function(t){return B(e,t)})}function ce(e,t){return St(E(t),function(n){return B(e,n)})}function or(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return t.reduceRight(er,r)}}function b(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=or.apply(void 0,n);return function(i,l){switch(i){case Ae:return U(e,o(l));case Je:Pt(e);return;default:throw new Error("unrecognized action "+i)}}}function xn(e,t){return e===t}function J(e){e===void 0&&(e=xn);var t;return function(n){return function(r){e(t,r)||(t=r,n(r))}}}function A(e){return function(t){return function(n){e(n)&&t(n)}}}function H(e){return function(t){return Ct(t,e)}}function be(e){return function(t){return function(){return t(e)}}}function ye(e,t){return function(n){return function(r){return n(t=e(t,r))}}}function gt(e){return function(t){return function(n){e>0?e--:t(n)}}}function Ye(e){var t,n;return function(r){return function(o){t=o,!n&&(n=setTimeout(function(){n=void 0,r(t)},e))}}}function _t(e){var t,n;return function(r){return function(o){t=o,n&&clearTimeout(n),n=setTimeout(function(){r(t)},e)}}}function j(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=new Array(t.length),o=0,i=null,l=Math.pow(2,t.length)-1;return t.forEach(function(a,c){var d=Math.pow(2,c);U(a,function(u){var m=o;o=o|d,r[c]=u,m!==l&&o===l&&i&&(i(),i=null)})}),function(a){return function(c){var d=function(){return a([c].concat(r))};o===l?d():i=d}}}function en(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r,o){switch(r){case Ae:return nr.apply(void 0,t.map(function(i){return U(i,o)}));case Je:return;default:throw new Error("unrecognized action "+r)}}}function F(e,t){return t===void 0&&(t=xn),b(e,J(t))}function ie(){for(var e=k(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=new Array(n.length),i=0,l=Math.pow(2,n.length)-1;return n.forEach(function(a,c){var d=Math.pow(2,c);U(a,function(u){o[c]=u,i=i|d,i===l&&q(e,o)})}),function(a,c){switch(a){case Ae:return i===l&&c(o),U(e,c);case Je:return Pt(e);default:throw new Error("unrecognized action "+a)}}}function D(e,t,n){t===void 0&&(t=[]);var r=n===void 0?{singleton:!0}:n,o=r.singleton;return{id:ir(),constructor:e,dependencies:t,singleton:o}}var ir=function(){return Symbol()};function lr(e){var t=new Map,n=function r(o){var i=o.id,l=o.constructor,a=o.dependencies,c=o.singleton;if(c&&t.has(i))return t.get(i);var d=l(a.map(function(u){return r(u)}));return c&&t.set(i,d),d};return n(e)}function sr(e,t){if(e==null)return{};var n={},r=Object.keys(e),o,i;for(i=0;i<r.length;i++)o=r[i],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}function ar(e,t){if(!!e){if(typeof e=="string")return tn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tn(e,t)}}function tn(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function yt(e,t){var n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=ar(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ur=["children"];function cr(e,t){for(var n={},r={},o=0,i=e.length;o<i;)r[e[o]]=1,o+=1;for(var l in t)r.hasOwnProperty(l)||(n[l]=t[l]);return n}var ft=typeof document!="undefined"?g.exports.useLayoutEffect:g.exports.useEffect;function Ot(e,t,n){var r=Object.keys(t.required||{}),o=Object.keys(t.optional||{}),i=Object.keys(t.methods||{}),l=Object.keys(t.events||{}),a=g.exports.createContext({});function c(v,S){v.propsReady&&q(v.propsReady,!1);for(var p=yt(r),f;!(f=p()).done;){var C=f.value,s=v[t.required[C]];q(s,S[C])}for(var h=yt(o),T;!(T=h()).done;){var y=T.value;if(y in S){var z=v[t.optional[y]];q(z,S[y])}}v.propsReady&&q(v.propsReady,!0)}function d(v){return i.reduce(function(S,p){return S[p]=function(f){var C=v[t.methods[p]];q(C,f)},S},{})}function u(v){return l.reduce(function(S,p){return S[p]=rr(v[t.events[p]]),S},{})}var m=g.exports.forwardRef(function(v,S){var p=v.children,f=sr(v,ur),C=g.exports.useState(function(){return St(lr(e),function(y){return c(y,f)})}),s=C[0],h=g.exports.useState(Qt(u,s)),T=h[0];return ft(function(){for(var y=yt(l),z;!(z=y()).done;){var R=z.value;R in f&&U(T[R],f[R])}return function(){Object.values(T).map(Pt)}},[f,T,s]),ft(function(){c(s,f)}),g.exports.useImperativeHandle(S,Xt(d(s))),g.exports.createElement(a.Provider,{value:s},n?g.exports.createElement(n,cr([].concat(r,o,l),f),p):p)}),x=function(S){return g.exports.useCallback(vn(q,g.exports.useContext(a)[S]),[S])},w=function(S){var p=g.exports.useContext(a),f=p[S],C=g.exports.useState(Qt(He,f)),s=C[0],h=C[1];return ft(function(){return U(f,function(T){T!==s&&h(Xt(T))})},[f,s]),s},I=function(S,p){var f=g.exports.useContext(a),C=f[S];ft(function(){return U(C,p)},[p,C])};return{Component:m,usePublisher:x,useEmitterValue:w,useEmitter:I}}function O(){return O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},O.apply(this,arguments)}function Qe(e,t){if(e==null)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t.indexOf(n=i[r])>=0||(o[n]=e[n]);return o}function nn(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Fe(e,t){var n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(o,i){if(o){if(typeof o=="string")return nn(o,i);var l=Object.prototype.toString.call(o).slice(8,-1);return l==="Object"&&o.constructor&&(l=o.constructor.name),l==="Map"||l==="Set"?Array.from(o):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?nn(o,i):void 0}}(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var tt,te,fr=typeof document!="undefined"?g.exports.useLayoutEffect:g.exports.useEffect;(function(e){e[e.DEBUG=0]="DEBUG",e[e.INFO=1]="INFO",e[e.WARN=2]="WARN",e[e.ERROR=3]="ERROR"})(te||(te={}));var dr=((tt={})[te.DEBUG]="debug",tt[te.INFO]="log",tt[te.WARN]="warn",tt[te.ERROR]="error",tt),De=D(function(){var e=E(te.ERROR);return{log:E(function(t,n,r){var o;r===void 0&&(r=te.INFO),r>=((o=(typeof globalThis=="undefined"?window:globalThis).VIRTUOSO_LOG_LEVEL)!=null?o:He(e))&&console[dr[r]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: initial",t,n)}),logLevel:e}},[],{singleton:!0});function Mt(e,t){t===void 0&&(t=!0);var n=g.exports.useRef(null),r=function(i){};if(typeof ResizeObserver!="undefined"){var o=new ResizeObserver(function(i){var l=i[0].target;l.offsetParent!==null&&e(l)});r=function(i){i&&t?(o.observe(i),n.current=i):(n.current&&o.unobserve(n.current),n.current=null)}}return{ref:n,callbackRef:r}}function We(e,t){return t===void 0&&(t=!0),Mt(e,t).callbackRef}function In(e,t,n,r,o,i){return Mt(function(l){for(var a=function(u,m,x,w){var I=u.length;if(I===0)return null;for(var v=[],S=0;S<I;S++){var p=u.item(S);if(p&&p.dataset.index!==void 0){var f=parseInt(p.dataset.index),C=parseFloat(p.dataset.knownSize),s=m(p,"offsetHeight");if(s===0&&w("Zero-sized element, this should not happen",{child:p},te.ERROR),s!==C){var h=v[v.length-1];v.length===0||h.size!==s||h.endIndex!==f-1?v.push({startIndex:f,endIndex:f,size:s}):v[v.length-1].endIndex++}}}return v}(l.children,t,0,o),c=l.parentElement;!c.dataset.virtuosoScroller;)c=c.parentElement;var d=i?i.scrollTop:c.firstElementChild.dataset.viewportType==="window"?window.pageYOffset||document.documentElement.scrollTop:c.scrollTop;r({scrollTop:Math.max(d,0),scrollHeight:(i!=null?i:c).scrollHeight,viewportHeight:(i!=null?i:c).offsetHeight}),a!==null&&e(a)},n)}function Ee(e,t){return Math.round(e.getBoundingClientRect()[t])}function Cn(e,t,n,r,o){r===void 0&&(r=Ne);var i=g.exports.useRef(null),l=g.exports.useRef(null),a=g.exports.useRef(null),c=g.exports.useRef(!1),d=g.exports.useCallback(function(u){var m=u.target,x=m===window||m===document?window.pageYOffset||document.documentElement.scrollTop:m.scrollTop,w=m===window?document.documentElement.scrollHeight:m.scrollHeight,I=m===window?window.innerHeight:m.offsetHeight,v=function(){e({scrollTop:Math.max(x,0),scrollHeight:w,viewportHeight:I})};c.current?Nn.exports.flushSync(v):v(),c.current=!1,l.current!==null&&(x===l.current||x<=0||x===m.scrollHeight-Ee(m,"height"))&&(l.current=null,t(!0),a.current&&(clearTimeout(a.current),a.current=null))},[e,t]);return g.exports.useEffect(function(){var u=o||i.current;return r(o||i.current),d({target:u}),u.addEventListener("scroll",d,{passive:!0}),function(){r(null),u.removeEventListener("scroll",d)}},[i,d,n,r,o]),{scrollerRef:i,scrollByCallback:function(u){c.current=!0,i.current.scrollBy(u)},scrollToCallback:function(u){var m=i.current;if(m&&(!("offsetHeight"in m)||m.offsetHeight!==0)){var x,w,I,v=u.behavior==="smooth";if(m===window?(w=Math.max(Ee(document.documentElement,"height"),document.documentElement.scrollHeight),x=window.innerHeight,I=document.documentElement.scrollTop):(w=m.scrollHeight,x=Ee(m,"height"),I=m.scrollTop),u.top=Math.ceil(Math.max(Math.min(w-x,u.top),0)),Math.abs(x-w)<1.01||u.top===I)return e({scrollTop:I,scrollHeight:w,viewportHeight:x}),void(v&&t(!0));v?(l.current=u.top,a.current&&clearTimeout(a.current),a.current=setTimeout(function(){a.current=null,l.current=null,t(!0)},1e3)):l.current=null,m.scrollTo(u)}}}}var At=D(function(){return{recalcInProgress:E(!1)}},[],{singleton:!0}),fe=D(function(e){var t=e[0].recalcInProgress,n=k(),r=k(),o=E(0),i=k(),l=E(0),a=k(),c=k(),d=E(0),u=E(0),m=E(0),x=k(),w=k(),I=E(!1),v=E(!1);return B(b(r,be(!1)),t),B(b(n,H(function(S){return S.scrollTop})),r),B(b(n,H(function(S){return S.scrollHeight})),c),B(r,l),{scrollContainerState:n,scrollTop:r,viewportHeight:a,headerHeight:d,fixedHeaderHeight:u,footerHeight:m,scrollHeight:c,smoothScrollTargetReached:i,react18ConcurrentRendering:v,scrollTo:x,scrollBy:w,statefulScrollTop:l,deviation:o,scrollingInProgress:I}},Z(At),{singleton:!0}),rt={lvl:0};function Sn(e,t,n,r,o){return r===void 0&&(r=rt),o===void 0&&(o=rt),{k:e,v:t,lvl:n,l:r,r:o}}function Y(e){return e===rt}function nt(){return rt}function Ht(e,t){if(Y(e))return rt;var n=e.k,r=e.l,o=e.r;if(t===n){if(Y(r))return o;if(Y(o))return r;var i=wn(r);return zt(oe(e,{k:i[0],v:i[1],l:Tn(r)}))}return zt(oe(e,t<n?{l:Ht(r,t)}:{r:Ht(o,t)}))}function Se(e,t,n){if(n===void 0&&(n="k"),Y(e))return[-1/0,void 0];if(e[n]===t)return[e.k,e.v];if(e[n]<t){var r=Se(e.r,t,n);return r[0]===-1/0?[e.k,e.v]:r}return Se(e.l,t,n)}function Ie(e,t,n){return Y(e)?Sn(t,n,1):t===e.k?oe(e,{k:t,v:n}):function(r){return Lt(yn(r))}(oe(e,t<e.k?{l:Ie(e.l,t,n)}:{r:Ie(e.r,t,n)}))}function Bt(e,t,n){if(Y(e))return[];var r=e.k,o=e.v,i=e.r,l=[];return r>t&&(l=l.concat(Bt(e.l,t,n))),r>=t&&r<=n&&l.push({k:r,v:o}),r<=n&&(l=l.concat(Bt(i,t,n))),l}function vt(e){return Y(e)?[]:[].concat(vt(e.l),[{k:e.k,v:e.v}],vt(e.r))}function wn(e){return Y(e.r)?[e.k,e.v]:wn(e.r)}function Tn(e){return Y(e.r)?e.l:zt(oe(e,{r:Tn(e.r)}))}function oe(e,t){return Sn(t.k!==void 0?t.k:e.k,t.v!==void 0?t.v:e.v,t.lvl!==void 0?t.lvl:e.lvl,t.l!==void 0?t.l:e.l,t.r!==void 0?t.r:e.r)}function Et(e){return Y(e)||e.lvl>e.r.lvl}function zt(e){var t=e.l,n=e.r,r=e.lvl;if(n.lvl>=r-1&&t.lvl>=r-1)return e;if(r>n.lvl+1){if(Et(t))return yn(oe(e,{lvl:r-1}));if(Y(t)||Y(t.r))throw new Error("Unexpected empty nodes");return oe(t.r,{l:oe(t,{r:t.r.l}),r:oe(e,{l:t.r.r,lvl:r-1}),lvl:r})}if(Et(e))return Lt(oe(e,{lvl:r-1}));if(Y(n)||Y(n.l))throw new Error("Unexpected empty nodes");var o=n.l,i=Et(o)?n.lvl-1:n.lvl;return oe(o,{l:oe(e,{r:o.l,lvl:r-1}),r:Lt(oe(n,{l:o.r,lvl:i})),lvl:o.lvl+1})}function wt(e,t,n){return Y(e)?[]:bn(Bt(e,Se(e,t)[0],n),function(r){return{index:r.k,value:r.v}})}function bn(e,t){var n=e.length;if(n===0)return[];for(var r=t(e[0]),o=r.index,i=r.value,l=[],a=1;a<n;a++){var c=t(e[a]),d=c.index,u=c.value;l.push({start:o,end:d-1,value:i}),o=d,i=u}return l.push({start:o,end:1/0,value:i}),l}function Lt(e){var t=e.r,n=e.lvl;return Y(t)||Y(t.r)||t.lvl!==n||t.r.lvl!==n?e:oe(t,{l:oe(e,{r:t.l}),lvl:n+1})}function yn(e){var t=e.l;return Y(t)||t.lvl!==e.lvl?e:oe(t,{r:oe(e,{l:t.r})})}function xt(e,t,n,r){r===void 0&&(r=0);for(var o=e.length-1;r<=o;){var i=Math.floor((r+o)/2),l=n(e[i],t);if(l===0)return i;if(l===-1){if(o-r<2)return i-1;o=i-1}else{if(o===r)return i;r=i+1}}throw new Error("Failed binary finding record in array - "+e.join(",")+", searched for "+t)}function En(e,t,n){return e[xt(e,t,n)]}function mr(e){var t=e.size,n=e.startIndex,r=e.endIndex;return function(o){return o.start===n&&(o.end===r||o.end===1/0)&&o.value===t}}function jt(e,t){var n=e.index;return t===n?0:t<n?-1:1}function pr(e,t){var n=e.offset;return t===n?0:t<n?-1:1}function hr(e){return{index:e.index,value:e}}function Rn(e,t,n){var r=e,o=0,i=0,l=0,a=0;if(t!==0){l=r[a=xt(r,t-1,jt)].offset;var c=Se(n,t-1);o=c[0],i=c[1],r.length&&r[a].size===Se(n,t)[1]&&(a-=1),r=r.slice(0,a+1)}else r=[];for(var d,u=Fe(wt(n,t,1/0));!(d=u()).done;){var m=d.value,x=m.start,w=m.value,I=(x-o)*i+l;r.push({offset:I,size:w,index:x}),o=x,l=I,i=w}return{offsetTree:r,lastIndex:o,lastOffset:l,lastSize:i}}function gr(e,t){var n=t[0],r=t[1];n.length>0&&(0,t[2])("received item sizes",n,te.DEBUG);var o=e.sizeTree,i=o,l=0;if(r.length>0&&Y(o)&&n.length===2){var a=n[0].size,c=n[1].size;i=r.reduce(function(x,w){return Ie(Ie(x,w,a),w+1,c)},i)}else{var d=function(x,w){for(var I,v=Y(x)?0:1/0,S=Fe(w);!(I=S()).done;){var p=I.value,f=p.size,C=p.startIndex,s=p.endIndex;if(v=Math.min(v,C),Y(x))x=Ie(x,0,f);else{var h=wt(x,C-1,s+1);if(!h.some(mr(p))){for(var T,y=!1,z=!1,R=Fe(h);!(T=R()).done;){var P=T.value,W=P.start,Q=P.end,X=P.value;y?(s>=W||f===X)&&(x=Ht(x,W)):(z=X!==f,y=!0),Q>s&&s>=W&&X!==f&&(x=Ie(x,s+1,X))}z&&(x=Ie(x,C,f))}}}return[x,v]}(i,n);i=d[0],l=d[1]}if(i===o)return e;var u=Rn(e.offsetTree,l,i),m=u.offsetTree;return{sizeTree:i,offsetTree:m,lastIndex:u.lastIndex,lastOffset:u.lastOffset,lastSize:u.lastSize,groupOffsetTree:r.reduce(function(x,w){return Ie(x,w,ot(w,m))},nt()),groupIndices:r}}function ot(e,t){if(t.length===0)return 0;var n=En(t,e,jt);return n.size*(e-n.index)+n.offset}function Hn(e,t,n){if(function(o){return o.groupIndex!==void 0}(e))return t.groupIndices[e.groupIndex]+1;var r=Bn(e.index==="LAST"?n:e.index,t);return Math.max(0,r,Math.min(n,r))}function Bn(e,t){if(!Tt(t))return e;for(var n=0;t.groupIndices[n]<=e+n;)n++;return e+n}function Tt(e){return!Y(e.groupOffsetTree)}var vr={offsetHeight:"height",offsetWidth:"width"},Be=D(function(e){var t=e[0].log,n=e[1].recalcInProgress,r=k(),o=k(),i=ce(o,0),l=k(),a=k(),c=E(0),d=E([]),u=E(void 0),m=E(void 0),x=E(function(s,h){return Ee(s,vr[h])}),w=E(void 0),I={offsetTree:[],sizeTree:nt(),groupOffsetTree:nt(),lastIndex:0,lastOffset:0,lastSize:0,groupIndices:[]},v=ce(b(r,j(d,t),ye(gr,I),J()),I);B(b(d,A(function(s){return s.length>0}),j(v),H(function(s){var h=s[0],T=s[1],y=h.reduce(function(z,R,P){return Ie(z,R,ot(R,T.offsetTree)||P)},nt());return O({},T,{groupIndices:h,groupOffsetTree:y})})),v),B(b(o,j(v),A(function(s){return s[0]<s[1].lastIndex}),H(function(s){var h=s[1];return[{startIndex:s[0],endIndex:h.lastIndex,size:h.lastSize}]})),r),B(u,m);var S=ce(b(u,H(function(s){return s===void 0})),!0);B(b(m,A(function(s){return s!==void 0&&Y(He(v).sizeTree)}),H(function(s){return[{startIndex:0,endIndex:0,size:s}]})),r);var p=me(b(r,j(v),ye(function(s,h){var T=h[1];return{changed:T!==s.sizes,sizes:T}},{changed:!1,sizes:I}),H(function(s){return s.changed})));U(b(c,ye(function(s,h){return{diff:s.prev-h,prev:h}},{diff:0,prev:0}),H(function(s){return s.diff})),function(s){s>0?(q(n,!0),q(l,s)):s<0&&q(a,s)}),U(b(c,j(t)),function(s){s[0]<0&&(0,s[1])("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",{firstItemIndex:c},te.ERROR)});var f=me(l);B(b(l,j(v),H(function(s){var h=s[0],T=s[1];if(T.groupIndices.length>0)throw new Error("Virtuoso: prepending items does not work with groups");return vt(T.sizeTree).reduce(function(y,z){var R=z.k,P=z.v;return{ranges:[].concat(y.ranges,[{startIndex:y.prevIndex,endIndex:R+h-1,size:y.prevSize}]),prevIndex:R+h,prevSize:P}},{ranges:[],prevIndex:0,prevSize:T.lastSize}).ranges})),r);var C=me(b(a,j(v),H(function(s){return ot(-s[0],s[1].offsetTree)})));return B(b(a,j(v),H(function(s){var h=s[0],T=s[1];if(T.groupIndices.length>0)throw new Error("Virtuoso: shifting items does not work with groups");var y=vt(T.sizeTree).reduce(function(z,R){var P=R.v;return Ie(z,Math.max(0,R.k+h),P)},nt());return O({},T,{sizeTree:y},Rn(T.offsetTree,0,y))})),v),{data:w,totalCount:o,sizeRanges:r,groupIndices:d,defaultItemSize:m,fixedItemSize:u,unshiftWith:l,shiftWith:a,shiftWithOffset:C,beforeUnshiftWith:f,firstItemIndex:c,sizes:v,listRefresh:p,statefulTotalCount:i,trackItemSizes:S,itemSize:x}},Z(De,At),{singleton:!0}),xr=typeof document!="undefined"&&"scrollBehavior"in document.documentElement.style;function zn(e){var t=typeof e=="number"?{index:e}:e;return t.align||(t.align="start"),t.behavior&&xr||(t.behavior="auto"),t.offset||(t.offset=0),t}var st=D(function(e){var t=e[0],n=t.sizes,r=t.totalCount,o=t.listRefresh,i=e[1],l=i.scrollingInProgress,a=i.viewportHeight,c=i.scrollTo,d=i.smoothScrollTargetReached,u=i.headerHeight,m=i.footerHeight,x=e[2].log,w=k(),I=E(0),v=null,S=null,p=null;function f(){v&&(v(),v=null),p&&(p(),p=null),S&&(clearTimeout(S),S=null),q(l,!1)}return B(b(w,j(n,a,r,I,u,m,x),H(function(C){var s=C[0],h=C[1],T=C[2],y=C[3],z=C[4],R=C[5],P=C[6],W=C[7],Q=zn(s),X=Q.align,de=Q.behavior,$=Q.offset,M=y-1,_=Hn(Q,h,M),ne=ot(_,h.offsetTree)+R;X==="end"?(ne=ne-T+Se(h.sizeTree,_)[1],_===M&&(ne+=P)):X==="center"?ne=ne-T/2+Se(h.sizeTree,_)[1]/2:ne-=z,$&&(ne+=$);var L=function(re){f(),re?(W("retrying to scroll to",{location:s},te.DEBUG),q(w,s)):W("list did not change, scroll successful",{},te.DEBUG)};if(f(),de==="smooth"){var N=!1;p=U(o,function(re){N=N||re}),v=Ve(d,function(){L(N)})}else v=Ve(b(o,function(re){var xe=setTimeout(function(){re(!1)},50);return function(ge){ge&&(re(!0),clearTimeout(xe))}}),L);return S=setTimeout(function(){f()},1200),q(l,!0),W("scrolling from index to",{index:_,top:ne,behavior:de},te.DEBUG),{top:ne,behavior:de}})),c),{scrollToIndex:w,topListHeight:I}},Z(Be,fe,De),{singleton:!0}),it="up",Ir={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollTop:0,viewportHeight:0,scrollHeight:0}},at=D(function(e){var t=e[0],n=t.scrollContainerState,r=t.scrollTop,o=t.viewportHeight,i=t.headerHeight,l=t.footerHeight,a=t.scrollBy,c=E(!1),d=E(!0),u=k(),m=k(),x=E(4),w=E(0),I=ce(b(en(b(F(r),gt(1),be(!0)),b(F(r),gt(1),be(!1),_t(100))),J()),!1),v=ce(b(en(b(a,be(!0)),b(a,be(!1),_t(200))),J()),!1);B(b(ie(F(r),F(w)),H(function(s){return s[0]<=s[1]}),J()),d),B(b(d,Ye(50)),m);var S=me(b(ie(n,F(o),F(i),F(l),F(x)),ye(function(s,h){var T,y,z=h[0],R=z.scrollTop,P=z.scrollHeight,W=h[1],Q={viewportHeight:W,scrollTop:R,scrollHeight:P};return R+W-P>-h[4]?(R>s.state.scrollTop?(T="SCROLLED_DOWN",y=s.state.scrollTop-R):(T="SIZE_DECREASED",y=s.state.scrollTop-R||s.scrollTopDelta),{atBottom:!0,state:Q,atBottomBecause:T,scrollTopDelta:y}):{atBottom:!1,notAtBottomBecause:Q.scrollHeight>s.state.scrollHeight?"SIZE_INCREASED":W<s.state.viewportHeight?"VIEWPORT_HEIGHT_DECREASING":R<s.state.scrollTop?"SCROLLING_UPWARDS":"NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",state:Q}},Ir),J(function(s,h){return s&&s.atBottom===h.atBottom}))),p=ce(b(n,ye(function(s,h){var T=h.scrollTop,y=h.scrollHeight;return s.scrollHeight!==y?s.scrollTop!==T&&T===y-h.viewportHeight?{scrollHeight:y,scrollTop:T,jump:s.scrollTop-T,changed:!0}:{scrollHeight:y,scrollTop:T,jump:0,changed:!0}:{scrollTop:T,scrollHeight:y,jump:0,changed:!1}},{scrollHeight:0,jump:0,scrollTop:0,changed:!1}),A(function(s){return s.changed}),H(function(s){return s.jump})),0);B(b(S,H(function(s){return s.atBottom})),c),B(b(c,Ye(50)),u);var f=E("down");B(b(n,H(function(s){return s.scrollTop}),J(),ye(function(s,h){return He(v)?{direction:s.direction,prevScrollTop:h}:{direction:h<s.prevScrollTop?it:"down",prevScrollTop:h}},{direction:"down",prevScrollTop:0}),H(function(s){return s.direction})),f),B(b(n,Ye(50),be("none")),f);var C=E(0);return B(b(I,A(function(s){return!s}),be(0)),C),B(b(r,Ye(100),j(I),A(function(s){return!!s[1]}),ye(function(s,h){return[s[1],h[0]]},[0,0]),H(function(s){return s[1]-s[0]})),C),{isScrolling:I,isAtTop:d,isAtBottom:c,atBottomState:S,atTopStateChange:m,atBottomStateChange:u,scrollDirection:f,atBottomThreshold:x,atTopThreshold:w,scrollVelocity:C,lastJumpDueToItemResize:p}},Z(fe)),Ge=D(function(e){var t=e[0].log,n=E(!1),r=me(b(n,A(function(o){return o}),J()));return U(n,function(o){o&&He(t)("props updated",{},te.DEBUG)}),{propsReady:n,didMount:r}},Z(De),{singleton:!0}),Vt=D(function(e){var t=e[0],n=t.sizes,r=t.listRefresh,o=t.defaultItemSize,i=e[1].scrollTop,l=e[2].scrollToIndex,a=e[3].didMount,c=E(!0),d=E(0);return B(b(a,j(d),A(function(u){return!!u[1]}),be(!1)),c),U(b(ie(r,a),j(c,n,o),A(function(u){var m=u[1],x=u[3];return u[0][1]&&(!Y(u[2].sizeTree)||x!==void 0)&&!m}),j(d)),function(u){var m=u[1];setTimeout(function(){Ve(i,function(){q(c,!0)}),q(l,m)})}),{scrolledToInitialItem:c,initialTopMostItemIndex:d}},Z(Be,fe,st,Ge),{singleton:!0});function rn(e){return!!e&&(e==="smooth"?"smooth":"auto")}var Cr=D(function(e){var t=e[0],n=t.totalCount,r=t.listRefresh,o=e[1],i=o.isAtBottom,l=o.atBottomState,a=e[2].scrollToIndex,c=e[3].scrolledToInitialItem,d=e[4],u=d.propsReady,m=d.didMount,x=e[5].log,w=e[6].scrollingInProgress,I=E(!1),v=null;function S(p){q(a,{index:"LAST",align:"end",behavior:p})}return U(b(ie(b(F(n),gt(1)),m),j(F(I),i,c,w),H(function(p){var f=p[0],C=f[0],s=f[1]&&p[3],h="auto";return s&&(h=function(T,y){return typeof T=="function"?rn(T(y)):y&&rn(T)}(p[1],p[2]||p[4]),s=s&&!!h),{totalCount:C,shouldFollow:s,followOutputBehavior:h}}),A(function(p){return p.shouldFollow})),function(p){var f=p.totalCount,C=p.followOutputBehavior;v&&(v(),v=null),v=Ve(r,function(){He(x)("following output to ",{totalCount:f},te.DEBUG),S(C),v=null})}),U(b(ie(F(I),n,u),A(function(p){return p[0]&&p[2]}),ye(function(p,f){var C=f[1];return{refreshed:p.value===C,value:C}},{refreshed:!1,value:0}),A(function(p){return p.refreshed}),j(I,n)),function(p){var f=p[1],C=Ve(l,function(s){!f||s.atBottom||s.notAtBottomBecause!=="SIZE_INCREASED"||v||(He(x)("scrolling to bottom due to increased size",{},te.DEBUG),S("auto"))});setTimeout(C,100)}),U(ie(F(I),l),function(p){var f=p[1];p[0]&&!f.atBottom&&f.notAtBottomBecause==="VIEWPORT_HEIGHT_DECREASING"&&S("auto")}),{followOutput:I}},Z(Be,at,st,Vt,Ge,De,fe));function Sr(e){return e.reduce(function(t,n){return t.groupIndices.push(t.totalCount),t.totalCount+=n+1,t},{totalCount:0,groupIndices:[]})}var Ln=D(function(e){var t=e[0],n=t.totalCount,r=t.groupIndices,o=t.sizes,i=e[1],l=i.scrollTop,a=i.headerHeight,c=k(),d=k(),u=me(b(c,H(Sr)));return B(b(u,H(ht("totalCount"))),n),B(b(u,H(ht("groupIndices"))),r),B(b(ie(l,o,a),A(function(m){return Tt(m[1])}),H(function(m){return Se(m[1].groupOffsetTree,Math.max(m[0]-m[2],0),"v")[0]}),J(),H(function(m){return[m]})),d),{groupCounts:c,topItemsIndexes:d}},Z(Be,fe));function lt(e,t){return!(!e||e[0]!==t[0]||e[1]!==t[1])}function kn(e,t){return!(!e||e.startIndex!==t.startIndex||e.endIndex!==t.endIndex)}function on(e,t,n){return typeof e=="number"?n===it&&t==="top"||n==="down"&&t==="bottom"?e:0:n===it?t==="top"?e.main:e.reverse:t==="bottom"?e.main:e.reverse}function ln(e,t){return typeof e=="number"?e:e[t]||0}var Ft=D(function(e){var t=e[0],n=t.scrollTop,r=t.viewportHeight,o=t.deviation,i=t.headerHeight,l=t.fixedHeaderHeight,a=k(),c=E(0),d=E(0),u=E(0),m=ce(b(ie(F(n),F(r),F(i),F(a,lt),F(u),F(c),F(l),F(o),F(d)),H(function(x){var w=x[0],I=x[1],v=x[2],S=x[3],p=S[0],f=S[1],C=x[4],s=x[6],h=x[7],T=x[8],y=w-h,z=x[5]+s,R=Math.max(v-y,0),P="none",W=ln(T,"top"),Q=ln(T,"bottom");return p-=h,f+=v+s,(p+=v+s)>w+z-W&&(P=it),(f-=h)<w-R+I+Q&&(P="down"),P!=="none"?[Math.max(y-v-on(C,"top",P)-W,0),y-R-s+I+on(C,"bottom",P)+Q]:null}),A(function(x){return x!=null}),J(lt)),[0,0]);return{listBoundary:a,overscan:u,topListHeight:c,increaseViewportBy:d,visibleRange:m}},Z(fe),{singleton:!0}),sn={items:[],topItems:[],offsetTop:0,offsetBottom:0,top:0,bottom:0,topListHeight:0,totalCount:0,firstItemIndex:0};function an(e,t,n){if(e.length===0)return[];if(!Tt(t))return e.map(function(u){return O({},u,{index:u.index+n,originalIndex:u.index})});for(var r,o=[],i=wt(t.groupOffsetTree,e[0].index,e[e.length-1].index),l=void 0,a=0,c=Fe(e);!(r=c()).done;){var d=r.value;(!l||l.end<d.index)&&(l=i.shift(),a=t.groupIndices.indexOf(l.start)),o.push(O({},d.index===l.start?{type:"group",index:a}:{index:d.index-(a+1)+n,groupIndex:a},{size:d.size,offset:d.offset,originalIndex:d.index,data:d.data}))}return o}function dt(e,t,n,r,o){var i=0,l=0;if(e.length>0){i=e[0].offset;var a=e[e.length-1];l=a.offset+a.size}var c=i,d=r.lastOffset+(n-r.lastIndex)*r.lastSize-l;return{items:an(e,r,o),topItems:an(t,r,o),topListHeight:t.reduce(function(u,m){return m.size+u},0),offsetTop:i,offsetBottom:d,top:c,bottom:l,totalCount:n,firstItemIndex:o}}var Xe=D(function(e){var t=e[0],n=t.sizes,r=t.totalCount,o=t.data,i=t.firstItemIndex,l=e[1],a=e[2],c=a.visibleRange,d=a.listBoundary,u=a.topListHeight,m=e[3],x=m.scrolledToInitialItem,w=m.initialTopMostItemIndex,I=e[4].topListHeight,v=e[5],S=e[6].didMount,p=e[7].recalcInProgress,f=E([]),C=k();B(l.topItemsIndexes,f);var s=ce(b(ie(S,F(c,lt),F(r),F(n),F(w),x,F(f),F(i),o),j(p),A(function(h){return h[0][0]&&!h[1]}),H(function(h){var T=h[0],y=T[1],z=y[0],R=y[1],P=T[2],W=T[4],Q=T[5],X=T[6],de=T[7],$=T[8],M=T[3],_=M.sizeTree,ne=M.offsetTree;if(P===0||z===0&&R===0)return sn;if(Y(_))return dt(function(le,se,ve){if(Tt(se)){var ae=Bn(le,se);return[{index:Se(se.groupOffsetTree,ae)[0],size:0,offset:0},{index:ae,size:0,offset:0,data:ve&&ve[0]}]}return[{index:le,size:0,offset:0,data:ve&&ve[0]}]}(function(le,se){return typeof le=="number"?le:le.index==="LAST"?se-1:le.index}(W,P),M,$),[],P,M,de);var L=[];if(X.length>0)for(var N,re=X[0],xe=X[X.length-1],ge=0,Ue=Fe(wt(_,re,xe));!(N=Ue()).done;)for(var we=N.value,ze=we.value,pe=Math.max(we.start,re),he=Math.min(we.end,xe),je=pe;je<=he;je++)L.push({index:je,size:ze,offset:ge,data:$&&$[je]}),ge+=ze;if(!Q)return dt([],L,P,M,de);var Le=X.length>0?X[X.length-1]+1:0,et=function(le,se,ve,ae){return ae===void 0&&(ae=0),ae>0&&(se=Math.max(se,En(le,ae,jt).offset)),bn((Pe=ve,Te=xt(ke=le,se,Oe=pr),ut=xt(ke,Pe,Oe,Te),ke.slice(Te,ut+1)),hr);var ke,Pe,Oe,Te,ut}(ne,z,R,Le);if(et.length===0)return null;var Ke=P-1;return dt(St([],function(le){for(var se,ve=Fe(et);!(se=ve()).done;){var ae=se.value,ke=ae.value,Pe=ke.offset,Oe=ae.start,Te=ke.size;ke.offset<z&&(Pe+=((Oe+=Math.floor((z-ke.offset)/Te))-ae.start)*Te),Oe<Le&&(Pe+=(Le-Oe)*Te,Oe=Le);for(var ut=Math.min(ae.end,Ke),ct=Oe;ct<=ut&&!(Pe>=R);ct++)le.push({index:ct,size:Te,offset:Pe,data:$&&$[ct]}),Pe+=Te}}),L,P,M,de)}),A(function(h){return h!==null}),J()),sn);return B(b(o,A(function(h){return h!==void 0}),H(function(h){return h.length})),r),B(b(s,H(ht("topListHeight"))),I),B(I,u),B(b(s,H(function(h){return[h.top,h.bottom]})),d),B(b(s,H(function(h){return h.items})),C),O({listState:s,topItemsIndexes:f,endReached:me(b(s,A(function(h){return h.items.length>0}),j(r,o),A(function(h){var T=h[0].items;return T[T.length-1].originalIndex===h[1]-1}),H(function(h){return[h[1]-1,h[2]]}),J(lt),H(function(h){return h[0]}))),startReached:me(b(s,Ye(200),A(function(h){var T=h.items;return T.length>0&&T[0].originalIndex===h.topItems.length}),H(function(h){return h.items[0].index}),J())),rangeChanged:me(b(s,A(function(h){return h.items.length>0}),H(function(h){var T=h.items;return{startIndex:T[0].index,endIndex:T[T.length-1].index}}),J(kn))),itemsRendered:C},v)},Z(Be,Ln,Ft,Vt,st,at,Ge,At),{singleton:!0}),wr=D(function(e){var t=e[0],n=t.sizes,r=t.firstItemIndex,o=t.data,i=e[1].listState,l=e[2].didMount,a=E(0);return B(b(l,j(a),A(function(c){return c[1]!==0}),j(n,r,o),H(function(c){var d=c[0][1],u=c[1],m=c[2],x=c[3],w=x===void 0?[]:x,I=0;if(u.groupIndices.length>0)for(var v,S=Fe(u.groupIndices);!((v=S()).done||v.value-I>=d);)I++;var p=d+I;return dt(Array.from({length:p}).map(function(f,C){return{index:C,size:0,offset:0,data:w[C]}}),[],p,u,m)})),i),{initialItemCount:a}},Z(Be,Xe,Ge),{singleton:!0}),Pn=D(function(e){var t=e[0].scrollVelocity,n=E(!1),r=k(),o=E(!1);return B(b(t,j(o,n,r),A(function(i){return!!i[1]}),H(function(i){var l=i[0],a=i[1],c=i[2],d=i[3],u=a.enter;if(c){if((0,a.exit)(l,d))return!1}else if(u(l,d))return!0;return c}),J()),n),U(b(ie(n,t,r),j(o)),function(i){var l=i[0],a=i[1];return l[0]&&a&&a.change&&a.change(l[1],l[2])}),{isSeeking:n,scrollSeekConfiguration:o,scrollVelocity:t,scrollSeekRangeChanged:r}},Z(at),{singleton:!0}),Tr=D(function(e){var t=e[0].topItemsIndexes,n=E(0);return B(b(n,A(function(r){return r>0}),H(function(r){return Array.from({length:r}).map(function(o,i){return i})})),t),{topItemCount:n}},Z(Xe)),Nt=D(function(e){var t=e[0],n=t.footerHeight,r=t.headerHeight,o=t.fixedHeaderHeight,i=e[1].listState,l=k(),a=ce(b(ie(n,r,o,i),H(function(c){var d=c[3];return c[0]+c[1]+c[2]+d.offsetBottom+d.bottom})),0);return B(F(a),l),{totalListHeight:a,totalListHeightChanged:l}},Z(fe,Xe),{singleton:!0});function On(e){var t,n=!1;return function(){return n||(n=!0,t=e()),t}}var br=On(function(){return/iP(ad|hone|od).+Version\/[\d.]+.*Safari/i.test(navigator.userAgent)}),yr=D(function(e){var t=e[0],n=t.scrollBy,r=t.scrollTop,o=t.deviation,i=t.scrollingInProgress,l=e[1],a=l.isScrolling,c=l.isAtBottom,d=l.atBottomState,u=l.scrollDirection,m=e[3],x=m.beforeUnshiftWith,w=m.shiftWithOffset,I=m.sizes,v=e[4].log,S=me(b(e[2].listState,j(l.lastJumpDueToItemResize),ye(function(f,C){var s=f[1],h=C[0],T=h.items,y=h.totalCount,z=h.bottom+h.offsetBottom,R=0;return f[2]===y&&s.length>0&&T.length>0&&(T[0].originalIndex===0&&s[0].originalIndex===0||(R=z-f[3])!=0&&(R+=C[1])),[R,T,y,z]},[0,[],0,0]),A(function(f){return f[0]!==0}),j(r,u,i,v,c,d),A(function(f){return!f[3]&&f[1]!==0&&f[2]===it}),H(function(f){var C=f[0][0];return(0,f[4])("Upward scrolling compensation",{amount:C},te.DEBUG),C})));function p(f){f>0?(q(n,{top:-f,behavior:"auto"}),q(o,0)):(q(o,0),q(n,{top:-f,behavior:"auto"}))}return U(b(S,j(o,a)),function(f){var C=f[0],s=f[1];f[2]&&br()?q(o,s-C):p(-C)}),U(b(ie(ce(a,!1),o),A(function(f){return!f[0]&&f[1]!==0}),H(function(f){return f[1]}),Ye(1)),p),B(b(w,H(function(f){return{top:-f}})),n),B(b(x,j(I),H(function(f){return f[0]*f[1].lastSize})),S),{deviation:o}},Z(fe,at,Xe,Be,De)),Er=D(function(e){var t=e[0].totalListHeight,n=e[1].didMount,r=e[2].scrollTo,o=E(0);return U(b(n,j(o),A(function(i){return i[1]!==0}),H(function(i){return{top:i[1]}})),function(i){Ve(b(t,A(function(l){return l!==0})),function(){setTimeout(function(){q(r,i)})})}),{initialScrollTop:o}},Z(Nt,Ge,fe),{singleton:!0}),Rr=D(function(e){var t=e[0].viewportHeight,n=e[1].totalListHeight,r=E(!1);return{alignToBottom:r,paddingTopAddition:ce(b(ie(r,t,n),A(function(o){return o[0]}),H(function(o){return Math.max(0,o[1]-o[2])}),J()),0)}},Z(fe,Nt),{singleton:!0}),Mn=D(function(e){var t=e[0],n=t.scrollTo,r=t.scrollContainerState,o=k(),i=k(),l=k(),a=E(!1),c=E(void 0);return B(b(ie(o,i),H(function(d){var u=d[0],m=u.viewportHeight,x=u.scrollHeight;return{scrollTop:Math.max(0,u.scrollTop-d[1].offsetTop),scrollHeight:x,viewportHeight:m}})),r),B(b(n,j(i),H(function(d){var u=d[0];return O({},u,{top:u.top+d[1].offsetTop})})),l),{useWindowScroll:a,customScrollParent:c,windowScrollContainerState:o,windowViewportRect:i,windowScrollTo:l}},Z(fe)),Hr=["done","behavior"],Br=D(function(e){var t=e[0],n=t.sizes,r=t.totalCount,o=e[1],i=o.scrollTop,l=o.viewportHeight,a=o.headerHeight,c=o.scrollingInProgress,d=e[2].scrollToIndex,u=k();return B(b(u,j(n,l,r,a,i),H(function(m){var x=m[0],w=m[1],I=m[2],v=m[3],S=m[4],p=m[5],f=x.done,C=x.behavior,s=Qe(x,Hr),h=null,T=Hn(x,w,v-1),y=ot(T,w.offsetTree)+S;return y<p?h=O({},s,{behavior:C,align:"start"}):y+Se(w.sizeTree,T)[1]>p+I&&(h=O({},s,{behavior:C,align:"end"})),h?f&&Ve(b(c,gt(1),A(function(z){return z===!1})),f):f&&f(),h}),A(function(m){return m!==null})),d),{scrollIntoView:u}},Z(Be,fe,st,Xe,De),{singleton:!0}),zr=["listState","topItemsIndexes"],Lr=D(function(e){return O({},e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])},Z(Ft,wr,Ge,Pn,Nt,Er,Rr,Mn,Br)),An=D(function(e){var t=e[0],n=t.totalCount,r=t.sizeRanges,o=t.fixedItemSize,i=t.defaultItemSize,l=t.trackItemSizes,a=t.itemSize,c=t.data,d=t.firstItemIndex,u=t.groupIndices,m=t.statefulTotalCount,x=e[1],w=x.initialTopMostItemIndex,I=x.scrolledToInitialItem,v=e[2],S=e[3],p=e[4],f=p.listState,C=p.topItemsIndexes,s=Qe(p,zr),h=e[5].scrollToIndex,T=e[7].topItemCount,y=e[8].groupCounts,z=e[9],R=e[10];return B(s.rangeChanged,z.scrollSeekRangeChanged),B(b(z.windowViewportRect,H(ht("visibleHeight"))),v.viewportHeight),O({totalCount:n,data:c,firstItemIndex:d,sizeRanges:r,initialTopMostItemIndex:w,scrolledToInitialItem:I,topItemsIndexes:C,topItemCount:T,groupCounts:y,fixedItemHeight:o,defaultItemHeight:i},S,{statefulTotalCount:m,listState:f,scrollToIndex:h,trackItemSizes:l,itemSize:a,groupIndices:u},s,z,v,R)},Z(Be,Vt,fe,Cr,Xe,st,yr,Tr,Ln,Lr,De)),jn=On(function(){if(typeof document=="undefined")return"sticky";var e=document.createElement("div");return e.style.position="-webkit-sticky",e.style.position==="-webkit-sticky"?"-webkit-sticky":"sticky"});function Dt(e,t){var n=g.exports.useRef(null),r=g.exports.useCallback(function(c){if(c!==null){var d,u,m=c.getBoundingClientRect(),x=m.width;if(t){var w=t.getBoundingClientRect(),I=m.top-w.top;d=w.height-Math.max(0,I),u=I+t.scrollTop}else d=window.innerHeight-Math.max(0,m.top),u=m.top+window.pageYOffset;n.current={offsetTop:u,visibleHeight:d,visibleWidth:x},e(n.current)}},[e,t]),o=Mt(r),i=o.callbackRef,l=o.ref,a=g.exports.useCallback(function(){r(l.current)},[r,l]);return g.exports.useEffect(function(){if(t){t.addEventListener("scroll",a);var c=new ResizeObserver(a);return c.observe(t),function(){t.removeEventListener("scroll",a),c.unobserve(t)}}return window.addEventListener("scroll",a),window.addEventListener("resize",a),function(){window.removeEventListener("scroll",a),window.removeEventListener("resize",a)}},[a,t]),i}var kr=["placeholder"],Pr=["style","children"],Or=["style","children"];function Wt(e){return e}var Mr=D(function(){var e=E(function(c){return"Item "+c}),t=E(null),n=E(function(c){return"Group "+c}),r=E({}),o=E(Wt),i=E("div"),l=E(Ne),a=function(c,d){return d===void 0&&(d=null),ce(b(r,H(function(u){return u[c]}),J()),d)};return{context:t,itemContent:e,groupContent:n,components:r,computeItemKey:o,headerFooterTag:i,scrollerRef:l,FooterComponent:a("Footer"),HeaderComponent:a("Header"),TopItemListComponent:a("TopItemList"),ListComponent:a("List","div"),ItemComponent:a("Item","div"),GroupComponent:a("Group","div"),ScrollerComponent:a("Scroller","div"),EmptyPlaceholder:a("EmptyPlaceholder"),ScrollSeekPlaceholder:a("ScrollSeekPlaceholder")}});function qe(e,t){var n=k();return U(n,function(){return console.warn("react-virtuoso: You are using a deprecated property. "+t,"color: red;","color: inherit;","color: blue;")}),B(n,e),n}var Ar=D(function(e){var t=e[0],n=e[1],r={item:qe(n.itemContent,"Rename the %citem%c prop to %citemContent."),group:qe(n.groupContent,"Rename the %cgroup%c prop to %cgroupContent."),topItems:qe(t.topItemCount,"Rename the %ctopItems%c prop to %ctopItemCount."),itemHeight:qe(t.fixedItemHeight,"Rename the %citemHeight%c prop to %cfixedItemHeight."),scrollingStateChange:qe(t.isScrolling,"Rename the %cscrollingStateChange%c prop to %cisScrolling."),adjustForPrependedItems:k(),maxHeightCacheSize:k(),footer:k(),header:k(),HeaderContainer:k(),FooterContainer:k(),ItemContainer:k(),ScrollContainer:k(),GroupContainer:k(),ListContainer:k(),emptyComponent:k(),scrollSeek:k()};function o(i,l,a){B(b(i,j(n.components),H(function(c){var d,u=c[0],m=c[1];return console.warn("react-virtuoso: "+a+" property is deprecated. Pass components."+l+" instead."),O({},m,((d={})[l]=u,d))})),n.components)}return U(r.adjustForPrependedItems,function(){console.warn("react-virtuoso: adjustForPrependedItems is no longer supported. Use the firstItemIndex property instead - https://virtuoso.dev/prepend-items.","color: red;","color: inherit;","color: blue;")}),U(r.maxHeightCacheSize,function(){console.warn("react-virtuoso: maxHeightCacheSize is no longer necessary. Setting it has no effect - remove it from your code.")}),U(r.HeaderContainer,function(){console.warn("react-virtuoso: HeaderContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the header component and pass components.Header to change its contents.")}),U(r.FooterContainer,function(){console.warn("react-virtuoso: FooterContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the footer component and pass components.Footer to change its contents.")}),U(r.scrollSeek,function(i){var l=i.placeholder,a=Qe(i,kr);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead."),q(n.components,O({},He(n.components),{ScrollSeekPlaceholder:l})),q(t.scrollSeekConfiguration,a)}),o(r.footer,"Footer","footer"),o(r.header,"Header","header"),o(r.ItemContainer,"Item","ItemContainer"),o(r.ListContainer,"List","ListContainer"),o(r.ScrollContainer,"Scroller","ScrollContainer"),o(r.emptyComponent,"EmptyPlaceholder","emptyComponent"),o(r.GroupContainer,"Group","GroupContainer"),O({},t,n,r)},Z(An,Mr)),jr=function(e){return g.exports.createElement("div",{style:{height:e.height}})},Vr={position:jn(),zIndex:1,overflowAnchor:"none"},Fr={overflowAnchor:"none"},un=g.exports.memo(function(e){var t=e.showTopList,n=t!==void 0&&t,r=V("listState"),o=Re("sizeRanges"),i=V("useWindowScroll"),l=V("customScrollParent"),a=Re("windowScrollContainerState"),c=Re("scrollContainerState"),d=l||i?a:c,u=V("itemContent"),m=V("context"),x=V("groupContent"),w=V("trackItemSizes"),I=V("itemSize"),v=V("log"),S=In(o,I,w,n?Ne:d,v,l),p=S.callbackRef,f=S.ref,C=g.exports.useState(0),s=C[0],h=C[1];Kt("deviation",function(M){s!==M&&(f.current.style.marginTop=M+"px",h(M))});var T=V("EmptyPlaceholder"),y=V("ScrollSeekPlaceholder")||jr,z=V("ListComponent"),R=V("ItemComponent"),P=V("GroupComponent"),W=V("computeItemKey"),Q=V("isSeeking"),X=V("groupIndices").length>0,de=V("paddingTopAddition"),$=n?{}:{boxSizing:"border-box",paddingTop:r.offsetTop+de,paddingBottom:r.offsetBottom,marginTop:s};return!n&&r.totalCount===0&&T?g.exports.createElement(T,ee(T,m)):g.exports.createElement(z,O({},ee(z,m),{ref:p,style:$,"data-test-id":n?"virtuoso-top-item-list":"virtuoso-item-list"}),(n?r.topItems:r.items).map(function(M){var _=M.originalIndex,ne=W(_+r.firstItemIndex,M.data,m);return Q?g.exports.createElement(y,O({},ee(y,m),{key:ne,index:M.index,height:M.size,type:M.type||"item"},M.type==="group"?{}:{groupIndex:M.groupIndex})):M.type==="group"?g.exports.createElement(P,O({},ee(P,m),{key:ne,"data-index":_,"data-known-size":M.size,"data-item-index":M.index,style:Vr}),x(M.index)):g.exports.createElement(R,O({},ee(R,m),{key:ne,"data-index":_,"data-known-size":M.size,"data-item-index":M.index,"data-item-group-index":M.groupIndex,style:Fr}),X?u(M.index,M.groupIndex,M.data,m):u(M.index,M.data,m))}))}),Nr={height:"100%",outline:"none",overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},_e={width:"100%",height:"100%",position:"absolute",top:0},Dr={width:"100%",position:jn(),top:0};function ee(e,t){if(typeof e!="string")return{context:t}}var Wr=g.exports.memo(function(){var e=V("HeaderComponent"),t=Re("headerHeight"),n=V("headerFooterTag"),r=We(function(i){return t(Ee(i,"height"))}),o=V("context");return e?g.exports.createElement(n,{ref:r},g.exports.createElement(e,ee(e,o))):null}),Gr=g.exports.memo(function(){var e=V("FooterComponent"),t=Re("footerHeight"),n=V("headerFooterTag"),r=We(function(i){return t(Ee(i,"height"))}),o=V("context");return e?g.exports.createElement(n,{ref:r},g.exports.createElement(e,ee(e,o))):null});function Gt(e){var t=e.usePublisher,n=e.useEmitter,r=e.useEmitterValue;return g.exports.memo(function(o){var i=o.style,l=o.children,a=Qe(o,Pr),c=t("scrollContainerState"),d=r("ScrollerComponent"),u=t("smoothScrollTargetReached"),m=r("scrollerRef"),x=r("context"),w=Cn(c,u,d,m),I=w.scrollerRef,v=w.scrollByCallback;return n("scrollTo",w.scrollToCallback),n("scrollBy",v),g.exports.createElement(d,O({ref:I,style:O({},Nr,i),"data-test-id":"virtuoso-scroller","data-virtuoso-scroller":!0,tabIndex:0},a,ee(d,x)),l)})}function Ut(e){var t=e.usePublisher,n=e.useEmitter,r=e.useEmitterValue;return g.exports.memo(function(o){var i=o.style,l=o.children,a=Qe(o,Or),c=t("windowScrollContainerState"),d=r("ScrollerComponent"),u=t("smoothScrollTargetReached"),m=r("totalListHeight"),x=r("deviation"),w=r("customScrollParent"),I=r("context"),v=Cn(c,u,d,Ne,w),S=v.scrollerRef,p=v.scrollByCallback,f=v.scrollToCallback;return fr(function(){return S.current=w||window,function(){S.current=null}},[S,w]),n("windowScrollTo",f),n("scrollBy",p),g.exports.createElement(d,O({style:O({position:"relative"},i,m!==0?{height:m+x}:{}),"data-virtuoso-scroller":!0},a,ee(d,I)),l)})}var Ur=function(e){var t=e.children,n=Re("viewportHeight"),r=We(Ct(n,function(o){return Ee(o,"height")}));return g.exports.createElement("div",{style:_e,ref:r,"data-viewport-type":"element"},t)},Kr=function(e){var t=e.children,n=Dt(Re("windowViewportRect"),V("customScrollParent"));return g.exports.createElement("div",{ref:n,style:_e,"data-viewport-type":"window"},t)},$r=function(e){var t=e.children,n=V("TopItemListComponent"),r=V("headerHeight"),o=O({},Dr,{marginTop:r+"px"}),i=V("context");return g.exports.createElement(n||"div",{style:o,context:i},t)},bt=Ot(Ar,{required:{},optional:{context:"context",followOutput:"followOutput",firstItemIndex:"firstItemIndex",itemContent:"itemContent",groupContent:"groupContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",react18ConcurrentRendering:"react18ConcurrentRendering",item:"item",group:"group",topItems:"topItems",itemHeight:"itemHeight",scrollingStateChange:"scrollingStateChange",maxHeightCacheSize:"maxHeightCacheSize",footer:"footer",header:"header",ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",GroupContainer:"GroupContainer",emptyComponent:"emptyComponent",HeaderContainer:"HeaderContainer",FooterContainer:"FooterContainer",scrollSeek:"scrollSeek"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",adjustForPrependedItems:"adjustForPrependedItems"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},g.exports.memo(function(e){var t=V("useWindowScroll"),n=V("topItemsIndexes").length>0,r=V("customScrollParent"),o=r||t?Kr:Ur;return g.exports.createElement(r||t?Zr:Yr,O({},e),g.exports.createElement(o,null,g.exports.createElement(Wr,null),g.exports.createElement(un,null),g.exports.createElement(Gr,null)),n&&g.exports.createElement($r,null,g.exports.createElement(un,{showTopList:!0})))})),qr=bt.Component,Re=bt.usePublisher,V=bt.useEmitterValue,Kt=bt.useEmitter,Yr=Gt({usePublisher:Re,useEmitterValue:V,useEmitter:Kt}),Zr=Ut({usePublisher:Re,useEmitterValue:V,useEmitter:Kt}),cn={items:[],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},Jr={items:[{index:0}],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},fn=Math.round,dn=Math.ceil,$t=Math.floor,Rt=Math.min,mt=Math.max;function mn(e,t){return Array.from({length:t-e+1}).map(function(n,r){return{index:r+e}})}var Qr=D(function(e){var t=e[0],n=t.overscan,r=t.visibleRange,o=t.listBoundary,i=e[1],l=i.scrollTop,a=i.viewportHeight,c=i.scrollBy,d=i.scrollTo,u=i.smoothScrollTargetReached,m=i.scrollContainerState,x=e[2],w=e[3],I=e[4],v=I.propsReady,S=I.didMount,p=e[5],f=p.windowViewportRect,C=p.windowScrollTo,s=p.useWindowScroll,h=p.customScrollParent,T=p.windowScrollContainerState,y=E(0),z=E(0),R=E(cn),P=E({height:0,width:0}),W=E({height:0,width:0}),Q=k(),X=k(),de=E(0);B(b(S,j(z),A(function(L){return L[1]!==0}),H(function(L){return{items:mn(0,L[1]-1),top:0,bottom:0,offsetBottom:0,offsetTop:0,itemHeight:0,itemWidth:0}})),R),B(b(ie(F(y),r,F(W,function(L,N){return L&&L.width===N.width&&L.height===N.height})),j(P),H(function(L){var N=L[0],re=N[0],xe=N[1],ge=xe[0],Ue=xe[1],we=N[2],ze=L[1],pe=we.height,he=we.width,je=ze.width;if(re===0||je===0)return cn;if(he===0)return Jr;var Le=Vn(je,he),et=Le*$t(ge/pe),Ke=Le*dn(Ue/pe)-1;Ke=mt(0,Rt(re-1,Ke));var le=mn(et=Rt(Ke,mt(0,et)),Ke),se=pn(ze,we,le),ve=se.top,ae=se.bottom;return{items:le,offsetTop:ve,offsetBottom:dn(re/Le)*pe-ae,top:ve,bottom:ae,itemHeight:pe,itemWidth:he}})),R),B(b(P,H(function(L){return L.height})),a),B(b(ie(P,W,R),H(function(L){var N=pn(L[0],L[1],L[2].items);return[N.top,N.bottom]}),J(lt)),o);var $=me(b(F(R),A(function(L){return L.items.length>0}),j(y),A(function(L){var N=L[0].items;return N[N.length-1].index===L[1]-1}),H(function(L){return L[1]-1}),J())),M=me(b(F(R),A(function(L){var N=L.items;return N.length>0&&N[0].index===0}),be(0),J())),_=me(b(F(R),A(function(L){return L.items.length>0}),H(function(L){var N=L.items;return{startIndex:N[0].index,endIndex:N[N.length-1].index}}),J(kn)));B(_,w.scrollSeekRangeChanged),B(b(Q,j(P,W,y),H(function(L){var N=L[1],re=L[2],xe=L[3],ge=zn(L[0]),Ue=ge.align,we=ge.behavior,ze=ge.offset,pe=ge.index;pe==="LAST"&&(pe=xe-1);var he=kt(N,re,pe=mt(0,pe,Rt(xe-1,pe)));return Ue==="end"?he=fn(he-N.height+re.height):Ue==="center"&&(he=fn(he-N.height/2+re.height/2)),ze&&(he+=ze),{top:he,behavior:we}})),d);var ne=ce(b(R,H(function(L){return L.offsetBottom+L.bottom})),0);return B(b(f,H(function(L){return{width:L.visibleWidth,height:L.visibleHeight}})),P),O({totalCount:y,viewportDimensions:P,itemDimensions:W,scrollTop:l,scrollHeight:X,overscan:n,scrollBy:c,scrollTo:d,scrollToIndex:Q,smoothScrollTargetReached:u,windowViewportRect:f,windowScrollTo:C,useWindowScroll:s,customScrollParent:h,windowScrollContainerState:T,deviation:de,scrollContainerState:m,initialItemCount:z},w,{gridState:R,totalListHeight:ne},x,{startReached:M,endReached:$,rangeChanged:_,propsReady:v})},Z(Ft,fe,at,Pn,Ge,Mn));function pn(e,t,n){var r=t.height;return r===void 0||n.length===0?{top:0,bottom:0}:{top:kt(e,t,n[0].index),bottom:kt(e,t,n[n.length-1].index)+r}}function kt(e,t,n){var r=Vn(e.width,t.width);return $t(n/r)*t.height}function Vn(e,t){return mt(1,$t(e/t))}var Xr=["placeholder"],_r=D(function(){var e=E(function(c){return"Item "+c}),t=E({}),n=E(null),r=E("virtuoso-grid-item"),o=E("virtuoso-grid-list"),i=E(Wt),l=E(Ne),a=function(c,d){return d===void 0&&(d=null),ce(b(t,H(function(u){return u[c]}),J()),d)};return{context:n,itemContent:e,components:t,computeItemKey:i,itemClassName:r,listClassName:o,scrollerRef:l,ListComponent:a("List","div"),ItemComponent:a("Item","div"),ScrollerComponent:a("Scroller","div"),ScrollSeekPlaceholder:a("ScrollSeekPlaceholder","div")}}),eo=D(function(e){var t=e[0],n=e[1],r={item:qe(n.itemContent,"Rename the %citem%c prop to %citemContent."),ItemContainer:k(),ScrollContainer:k(),ListContainer:k(),emptyComponent:k(),scrollSeek:k()};function o(i,l,a){B(b(i,j(n.components),H(function(c){var d,u=c[0],m=c[1];return console.warn("react-virtuoso: "+a+" property is deprecated. Pass components."+l+" instead."),O({},m,((d={})[l]=u,d))})),n.components)}return U(r.scrollSeek,function(i){var l=i.placeholder,a=Qe(i,Xr);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead."),q(n.components,O({},He(n.components),{ScrollSeekPlaceholder:l})),q(t.scrollSeekConfiguration,a)}),o(r.ItemContainer,"Item","ItemContainer"),o(r.ListContainer,"List","ListContainer"),o(r.ScrollContainer,"Scroller","ScrollContainer"),O({},t,n,r)},Z(Qr,_r)),to=g.exports.memo(function(){var e=ue("gridState"),t=ue("listClassName"),n=ue("itemClassName"),r=ue("itemContent"),o=ue("computeItemKey"),i=ue("isSeeking"),l=Ze("scrollHeight"),a=ue("ItemComponent"),c=ue("ListComponent"),d=ue("ScrollSeekPlaceholder"),u=ue("context"),m=Ze("itemDimensions"),x=We(function(w){l(w.parentElement.parentElement.scrollHeight);var I=w.firstChild;I&&m(I.getBoundingClientRect())});return g.exports.createElement(c,O({ref:x,className:t},ee(c,u),{style:{paddingTop:e.offsetTop,paddingBottom:e.offsetBottom}}),e.items.map(function(w){var I=o(w.index);return i?g.exports.createElement(d,O({key:I},ee(d,u),{index:w.index,height:e.itemHeight,width:e.itemWidth})):g.exports.createElement(a,O({},ee(a,u),{className:n,"data-index":w.index,key:I}),r(w.index,u))}))}),no=function(e){var t=e.children,n=Ze("viewportDimensions"),r=We(function(o){n(o.getBoundingClientRect())});return g.exports.createElement("div",{style:_e,ref:r},t)},ro=function(e){var t=e.children,n=Dt(Ze("windowViewportRect"),ue("customScrollParent"));return g.exports.createElement("div",{ref:n,style:_e},t)},qt=Ot(eo,{optional:{totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",item:"item",ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",scrollSeek:"scrollSeek"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange"}},g.exports.memo(function(e){var t=O({},e),n=ue("useWindowScroll"),r=ue("customScrollParent"),o=r||n?ro:no;return g.exports.createElement(r||n?io:oo,O({},t),g.exports.createElement(o,null,g.exports.createElement(to,null)))})),Ze=qt.usePublisher,ue=qt.useEmitterValue,Fn=qt.useEmitter,oo=Gt({usePublisher:Ze,useEmitterValue:ue,useEmitter:Fn}),io=Ut({usePublisher:Ze,useEmitterValue:ue,useEmitter:Fn}),lo=D(function(){var e=E(function(a){return g.exports.createElement("td",null,"Item $",a)}),t=E(null),n=E(null),r=E({}),o=E(Wt),i=E(Ne),l=function(a,c){return c===void 0&&(c=null),ce(b(r,H(function(d){return d[a]}),J()),c)};return{context:t,itemContent:e,fixedHeaderContent:n,components:r,computeItemKey:o,scrollerRef:i,TableComponent:l("Table","table"),TableHeadComponent:l("TableHead","thead"),TableBodyComponent:l("TableBody","tbody"),TableRowComponent:l("TableRow","tr"),ScrollerComponent:l("Scroller","div"),EmptyPlaceholder:l("EmptyPlaceholder"),ScrollSeekPlaceholder:l("ScrollSeekPlaceholder"),FillerRow:l("FillerRow")}}),so=D(function(e){return O({},e[0],e[1])},Z(An,lo)),ao=function(e){return g.exports.createElement("tr",null,g.exports.createElement("td",{style:{height:e.height}}))},uo=function(e){return g.exports.createElement("tr",null,g.exports.createElement("td",{style:{height:e.height,padding:0,border:0}}))},co=g.exports.memo(function(){var e=K("listState"),t=Me("sizeRanges"),n=K("useWindowScroll"),r=K("customScrollParent"),o=Me("windowScrollContainerState"),i=Me("scrollContainerState"),l=r||n?o:i,a=K("itemContent"),c=K("trackItemSizes"),d=In(t,K("itemSize"),c,l,K("log"),r),u=d.callbackRef,m=d.ref,x=g.exports.useState(0),w=x[0],I=x[1];Zt("deviation",function($){w!==$&&(m.current.style.marginTop=$+"px",I($))});var v=K("EmptyPlaceholder"),S=K("ScrollSeekPlaceholder")||ao,p=K("FillerRow")||uo,f=K("TableBodyComponent"),C=K("TableRowComponent"),s=K("computeItemKey"),h=K("isSeeking"),T=K("paddingTopAddition"),y=K("firstItemIndex"),z=K("statefulTotalCount"),R=K("context");if(z===0&&v)return g.exports.createElement(v,ee(v,R));var P=e.offsetTop+T+w,W=e.offsetBottom,Q=P>0?g.exports.createElement(p,{height:P,key:"padding-top"}):null,X=W>0?g.exports.createElement(p,{height:W,key:"padding-bottom"}):null,de=e.items.map(function($){var M=$.originalIndex,_=s(M+y,$.data,R);return h?g.exports.createElement(S,O({},ee(S,R),{key:_,index:$.index,height:$.size,type:$.type||"item"})):g.exports.createElement(C,O({},ee(C,R),{key:_,"data-index":M,"data-known-size":$.size,"data-item-index":$.index,style:{overflowAnchor:"none"}}),a($.index,$.data,R))});return g.exports.createElement(f,O({ref:u,"data-test-id":"virtuoso-item-list"},ee(f,R)),[Q].concat(de,[X]))}),fo=function(e){var t=e.children,n=Me("viewportHeight"),r=We(Ct(n,function(o){return Ee(o,"height")}));return g.exports.createElement("div",{style:_e,ref:r,"data-viewport-type":"element"},t)},mo=function(e){var t=e.children,n=Dt(Me("windowViewportRect"),K("customScrollParent"));return g.exports.createElement("div",{ref:n,style:_e,"data-viewport-type":"window"},t)},Yt=Ot(so,{required:{},optional:{context:"context",followOutput:"followOutput",firstItemIndex:"firstItemIndex",itemContent:"itemContent",fixedHeaderContent:"fixedHeaderContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",react18ConcurrentRendering:"react18ConcurrentRendering"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},g.exports.memo(function(e){var t=K("useWindowScroll"),n=K("customScrollParent"),r=Me("fixedHeaderHeight"),o=K("fixedHeaderContent"),i=K("context"),l=We(Ct(r,function(x){return Ee(x,"height")})),a=n||t?ho:po,c=n||t?mo:fo,d=K("TableComponent"),u=K("TableHeadComponent"),m=o?g.exports.createElement(u,O({key:"TableHead",style:{zIndex:1,position:"sticky",top:0},ref:l},ee(u,i)),o()):null;return g.exports.createElement(a,O({},e),g.exports.createElement(c,null,g.exports.createElement(d,O({style:{borderSpacing:0}},ee(d,i)),[m,g.exports.createElement(co,{key:"TableBody"})])))})),Me=Yt.usePublisher,K=Yt.useEmitterValue,Zt=Yt.useEmitter,po=Gt({usePublisher:Me,useEmitterValue:K,useEmitter:Zt}),ho=Ut({usePublisher:Me,useEmitterValue:K,useEmitter:Zt}),go=qr;const{dataList:vo}=hn(1e3),xo=()=>{const[e,t]=g.exports.useState(vo);return g.exports.useEffect(()=>{setInterval(()=>{t(n=>{const o={id:Kn(),index:5+1,content:Un.lorem.sentences()},i=[...n];return i.splice(5,0,o),i})},2e3)},[]),G.exports.jsx(go,{style:{height:800,width:400},className:"border",totalCount:e.length,itemContent:n=>{const r=e[n];return G.exports.jsxs("div",{className:"border",children:[G.exports.jsx("h4",{children:r.index}),G.exports.jsx("p",{children:r.content})]})}})},Eo=()=>{const[e,t]=g.exports.useState(0),{Input:n}=Wn(),r=[{title:"\u56FA\u5B9A\u884C\u9AD8",com:G.exports.jsx(_n,{})},{title:"\u52A8\u6001\u884C\u9AD8 Array",com:G.exports.jsx(Zn,{})},{title:"\u52A8\u6001\u884C\u9AD8 Object",com:G.exports.jsx(Jn,{})},{title:"react-virtuoso",com:G.exports.jsx(xo,{})}];return G.exports.jsx("div",{children:G.exports.jsxs("div",{className:"mb-5",children:[G.exports.jsx(n,{className:"mr-2"}),r.map(({title:o},i)=>G.exports.jsx("button",{className:Dn("mr-2 mb-4",e===i&&"bg-gray-200"),onClick:()=>t(i),children:o},o)),r[e].com]})})};export{Eo as default};
